DoremiScriptParser = (function(){
  /* Generated by PEG.js 0.6.2 (http://pegjs.majda.cz/). */
  
  var result = {
    /*
     * Parses the input with a generated parser. If the parsing is successfull,
     * returns a value explicitly or implicitly specified by the grammar from
     * which the parser was generated (see |PEG.buildParser|). If the parsing is
     * unsuccessful, throws |PEG.parser.SyntaxError| describing the error.
     */
    parse: function(input, startRule) {
      var parseFunctions = {
        "ABC_A": parse_ABC_A,
        "ABC_AFLAT": parse_ABC_AFLAT,
        "ABC_ASHARP": parse_ABC_ASHARP,
        "ABC_B": parse_ABC_B,
        "ABC_BEAT_DELIMITED": parse_ABC_BEAT_DELIMITED,
        "ABC_BEAT_DELIMITED_ITEM": parse_ABC_BEAT_DELIMITED_ITEM,
        "ABC_BEAT_UNDELIMITED": parse_ABC_BEAT_UNDELIMITED,
        "ABC_BEAT_UNDELIMITED_ITEM": parse_ABC_BEAT_UNDELIMITED_ITEM,
        "ABC_BFLAT": parse_ABC_BFLAT,
        "ABC_BSHARP": parse_ABC_BSHARP,
        "ABC_C": parse_ABC_C,
        "ABC_CFLAT": parse_ABC_CFLAT,
        "ABC_CHAR": parse_ABC_CHAR,
        "ABC_CSHARP": parse_ABC_CSHARP,
        "ABC_D": parse_ABC_D,
        "ABC_DFLAT": parse_ABC_DFLAT,
        "ABC_DSHARP": parse_ABC_DSHARP,
        "ABC_E": parse_ABC_E,
        "ABC_EFLAT": parse_ABC_EFLAT,
        "ABC_F": parse_ABC_F,
        "ABC_FSHARP": parse_ABC_FSHARP,
        "ABC_G": parse_ABC_G,
        "ABC_GFLAT": parse_ABC_GFLAT,
        "ABC_GSHARP": parse_ABC_GSHARP,
        "ABC_LINE": parse_ABC_LINE,
        "ABC_MEASURE": parse_ABC_MEASURE,
        "ABC_MUSICAL_CHAR": parse_ABC_MUSICAL_CHAR,
        "ABC_NON_BARLINE": parse_ABC_NON_BARLINE,
        "ABC_PITCH": parse_ABC_PITCH,
        "ALTERNATE_ENDING_INDICATOR": parse_ALTERNATE_ENDING_INDICATOR,
        "ATTRIBUTE_LINE": parse_ATTRIBUTE_LINE,
        "BARLINE": parse_BARLINE,
        "BEAT_DELIMITED": parse_BEAT_DELIMITED,
        "BEAT_DELIMITED_ITEM": parse_BEAT_DELIMITED_ITEM,
        "BEAT_UNDELIMITED": parse_BEAT_UNDELIMITED,
        "BEAT_UNDELIMITED_ITEM": parse_BEAT_UNDELIMITED_ITEM,
        "BEGIN_BEAT_SYMBOL": parse_BEGIN_BEAT_SYMBOL,
        "BEGIN_SLUR_OF_PITCH": parse_BEGIN_SLUR_OF_PITCH,
        "CHORD_SYMBOL": parse_CHORD_SYMBOL,
        "CHORD_SYMBOL_CHAR": parse_CHORD_SYMBOL_CHAR,
        "CHORD_SYMBOL_INITIAL_CHAR": parse_CHORD_SYMBOL_INITIAL_CHAR,
        "COMPOSITION": parse_COMPOSITION,
        "COMPOUND_LINE": parse_COMPOUND_LINE,
        "DELIMITED_NUMBER_ORNAMENT": parse_DELIMITED_NUMBER_ORNAMENT,
        "DELIMITED_SARGAM_ORNAMENT": parse_DELIMITED_SARGAM_ORNAMENT,
        "DEVANAGRI_BEAT_DELIMITED": parse_DEVANAGRI_BEAT_DELIMITED,
        "DEVANAGRI_BEAT_DELIMITED_ITEM": parse_DEVANAGRI_BEAT_DELIMITED_ITEM,
        "DEVANAGRI_BEAT_UNDELIMITED": parse_DEVANAGRI_BEAT_UNDELIMITED,
        "DEVANAGRI_BEAT_UNDELIMITED_ITEM": parse_DEVANAGRI_BEAT_UNDELIMITED_ITEM,
        "DEVANAGRI_DHA": parse_DEVANAGRI_DHA,
        "DEVANAGRI_GA": parse_DEVANAGRI_GA,
        "DEVANAGRI_LINE": parse_DEVANAGRI_LINE,
        "DEVANAGRI_MA": parse_DEVANAGRI_MA,
        "DEVANAGRI_MA_SHARP": parse_DEVANAGRI_MA_SHARP,
        "DEVANAGRI_MEASURE": parse_DEVANAGRI_MEASURE,
        "DEVANAGRI_MUSICAL_CHAR": parse_DEVANAGRI_MUSICAL_CHAR,
        "DEVANAGRI_NI": parse_DEVANAGRI_NI,
        "DEVANAGRI_NON_BARLINE": parse_DEVANAGRI_NON_BARLINE,
        "DEVANAGRI_PA": parse_DEVANAGRI_PA,
        "DEVANAGRI_PITCH": parse_DEVANAGRI_PITCH,
        "DEVANAGRI_RE": parse_DEVANAGRI_RE,
        "DEVANAGRI_SA": parse_DEVANAGRI_SA,
        "DOUBLE_BARLINE": parse_DOUBLE_BARLINE,
        "EMPTY_LINE": parse_EMPTY_LINE,
        "END_BEAT_SYMBOL": parse_END_BEAT_SYMBOL,
        "END_SLUR": parse_END_SLUR,
        "END_SLUR_OF_PITCH": parse_END_SLUR_OF_PITCH,
        "EOF": parse_EOF,
        "EOL": parse_EOL,
        "FINAL_BARLINE": parse_FINAL_BARLINE,
        "FORWARD_SLASH_CHAR": parse_FORWARD_SLASH_CHAR,
        "HEADER_SECTION": parse_HEADER_SECTION,
        "KOMMAL_INDICATOR": parse_KOMMAL_INDICATOR,
        "LEFT_REPEAT": parse_LEFT_REPEAT,
        "LINE": parse_LINE,
        "LINE_END": parse_LINE_END,
        "LINE_END_CHAR": parse_LINE_END_CHAR,
        "LINE_NUMBER": parse_LINE_NUMBER,
        "LOWER_LOWER_OCTAVE_SYMBOL": parse_LOWER_LOWER_OCTAVE_SYMBOL,
        "LOWER_OCTAVE_DOT": parse_LOWER_OCTAVE_DOT,
        "LOWER_OCTAVE_LINE": parse_LOWER_OCTAVE_LINE,
        "LOWER_OCTAVE_LINE_ITEM": parse_LOWER_OCTAVE_LINE_ITEM,
        "LYRICS_LINE": parse_LYRICS_LINE,
        "LYRICS_SECTION": parse_LYRICS_SECTION,
        "MEASURE": parse_MEASURE,
        "MORDENT": parse_MORDENT,
        "NON_BARLINE": parse_NON_BARLINE,
        "NUMBER_A": parse_NUMBER_A,
        "NUMBER_AFLAT": parse_NUMBER_AFLAT,
        "NUMBER_ASHARP": parse_NUMBER_ASHARP,
        "NUMBER_B": parse_NUMBER_B,
        "NUMBER_BEAT_DELIMITED": parse_NUMBER_BEAT_DELIMITED,
        "NUMBER_BEAT_DELIMITED_ITEM": parse_NUMBER_BEAT_DELIMITED_ITEM,
        "NUMBER_BEAT_UNDELIMITED": parse_NUMBER_BEAT_UNDELIMITED,
        "NUMBER_BEAT_UNDELIMITED_ITEM": parse_NUMBER_BEAT_UNDELIMITED_ITEM,
        "NUMBER_BFLAT": parse_NUMBER_BFLAT,
        "NUMBER_BSHARP": parse_NUMBER_BSHARP,
        "NUMBER_C": parse_NUMBER_C,
        "NUMBER_CFLAT": parse_NUMBER_CFLAT,
        "NUMBER_CSHARP": parse_NUMBER_CSHARP,
        "NUMBER_D": parse_NUMBER_D,
        "NUMBER_DFLAT": parse_NUMBER_DFLAT,
        "NUMBER_DSHARP": parse_NUMBER_DSHARP,
        "NUMBER_E": parse_NUMBER_E,
        "NUMBER_EFLAT": parse_NUMBER_EFLAT,
        "NUMBER_ESHARP": parse_NUMBER_ESHARP,
        "NUMBER_F": parse_NUMBER_F,
        "NUMBER_FFLAT": parse_NUMBER_FFLAT,
        "NUMBER_FSHARP": parse_NUMBER_FSHARP,
        "NUMBER_G": parse_NUMBER_G,
        "NUMBER_GFLAT": parse_NUMBER_GFLAT,
        "NUMBER_GSHARP": parse_NUMBER_GSHARP,
        "NUMBER_LINE": parse_NUMBER_LINE,
        "NUMBER_MEASURE": parse_NUMBER_MEASURE,
        "NUMBER_MUSICAL_CHAR": parse_NUMBER_MUSICAL_CHAR,
        "NUMBER_NON_BARLINE": parse_NUMBER_NON_BARLINE,
        "NUMBER_ORNAMENT": parse_NUMBER_ORNAMENT,
        "NUMBER_PITCH": parse_NUMBER_PITCH,
        "REPEAT_SYMBOL": parse_REPEAT_SYMBOL,
        "REVERSE_FINAL_BARLINE": parse_REVERSE_FINAL_BARLINE,
        "RHYTHMICAL_DASH": parse_RHYTHMICAL_DASH,
        "RIGHT_REPEAT": parse_RIGHT_REPEAT,
        "SARGAM_DHA": parse_SARGAM_DHA,
        "SARGAM_DHA_FLAT": parse_SARGAM_DHA_FLAT,
        "SARGAM_DHA_SHARP": parse_SARGAM_DHA_SHARP,
        "SARGAM_GA": parse_SARGAM_GA,
        "SARGAM_GA_FLAT": parse_SARGAM_GA_FLAT,
        "SARGAM_GA_SHARP": parse_SARGAM_GA_SHARP,
        "SARGAM_LINE": parse_SARGAM_LINE,
        "SARGAM_LINE_ITEM": parse_SARGAM_LINE_ITEM,
        "SARGAM_MA": parse_SARGAM_MA,
        "SARGAM_MA_SHARP": parse_SARGAM_MA_SHARP,
        "SARGAM_MUSICAL_CHAR": parse_SARGAM_MUSICAL_CHAR,
        "SARGAM_NI": parse_SARGAM_NI,
        "SARGAM_NI_FLAT": parse_SARGAM_NI_FLAT,
        "SARGAM_NI_SHARP": parse_SARGAM_NI_SHARP,
        "SARGAM_ORNAMENT": parse_SARGAM_ORNAMENT,
        "SARGAM_PA": parse_SARGAM_PA,
        "SARGAM_PA_FLAT": parse_SARGAM_PA_FLAT,
        "SARGAM_PA_SHARP": parse_SARGAM_PA_SHARP,
        "SARGAM_PITCH": parse_SARGAM_PITCH,
        "SARGAM_RE": parse_SARGAM_RE,
        "SARGAM_RE_FLAT": parse_SARGAM_RE_FLAT,
        "SARGAM_RE_SHARP": parse_SARGAM_RE_SHARP,
        "SARGAM_SA": parse_SARGAM_SA,
        "SARGAM_SA_FLAT": parse_SARGAM_SA_FLAT,
        "SARGAM_SA_SHARP": parse_SARGAM_SA_SHARP,
        "SIMPLE_LINE": parse_SIMPLE_LINE,
        "SINGLE_BARLINE": parse_SINGLE_BARLINE,
        "SPACE": parse_SPACE,
        "SYLLABLE": parse_SYLLABLE,
        "TALA": parse_TALA,
        "UNDELIMITED_SARGAM_PITCH_WITH_DASHES": parse_UNDELIMITED_SARGAM_PITCH_WITH_DASHES,
        "UPPER_OCTAVE_DOT": parse_UPPER_OCTAVE_DOT,
        "UPPER_OCTAVE_LINE": parse_UPPER_OCTAVE_LINE,
        "UPPER_OCTAVE_LINE_ITEM": parse_UPPER_OCTAVE_LINE_ITEM,
        "UPPER_UPPER_OCTAVE_SYMBOL": parse_UPPER_UPPER_OCTAVE_SYMBOL,
        "WHITE_SPACE": parse_WHITE_SPACE,
        "WORD": parse_WORD,
        "_": parse__
      };
      
      if (startRule !== undefined) {
        if (parseFunctions[startRule] === undefined) {
          throw new Error("Invalid rule name: " + quote(startRule) + ".");
        }
      } else {
        startRule = "COMPOSITION";
      }
      
      var pos = 0;
      var reportMatchFailures = true;
      var rightmostMatchFailuresPos = 0;
      var rightmostMatchFailuresExpected = [];
      var cache = {};
      
      function padLeft(input, padding, length) {
        var result = input;
        
        var padLength = length - input.length;
        for (var i = 0; i < padLength; i++) {
          result = padding + result;
        }
        
        return result;
      }
      
      function escape(ch) {
        var charCode = ch.charCodeAt(0);
        
        if (charCode <= 0xFF) {
          var escapeChar = 'x';
          var length = 2;
        } else {
          var escapeChar = 'u';
          var length = 4;
        }
        
        return '\\' + escapeChar + padLeft(charCode.toString(16).toUpperCase(), '0', length);
      }
      
      function quote(s) {
        /*
         * ECMA-262, 5th ed., 7.8.4: All characters may appear literally in a
         * string literal except for the closing quote character, backslash,
         * carriage return, line separator, paragraph separator, and line feed.
         * Any character may appear in the form of an escape sequence.
         */
        return '"' + s
          .replace(/\\/g, '\\\\')            // backslash
          .replace(/"/g, '\\"')              // closing quote character
          .replace(/\r/g, '\\r')             // carriage return
          .replace(/\n/g, '\\n')             // line feed
          .replace(/[\x80-\uFFFF]/g, escape) // non-ASCII characters
          + '"';
      }
      
      function matchFailed(failure) {
        if (pos < rightmostMatchFailuresPos) {
          return;
        }
        
        if (pos > rightmostMatchFailuresPos) {
          rightmostMatchFailuresPos = pos;
          rightmostMatchFailuresExpected = [];
        }
        
        rightmostMatchFailuresExpected.push(failure);
      }
      
      function parse_EMPTY_LINE() {
        var cacheKey = 'EMPTY_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        if (input.substr(pos, 1) === "\n") {
          var result12 = "\n";
          pos += 1;
        } else {
          var result12 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\n\"");
          }
        }
        if (result12 !== null) {
          var result0 = result12;
        } else {
          var savedPos0 = pos;
          var savedPos1 = pos;
          var result4 = [];
          if (input.substr(pos, 1) === " ") {
            var result11 = " ";
            pos += 1;
          } else {
            var result11 = null;
            if (reportMatchFailures) {
              matchFailed("\" \"");
            }
          }
          while (result11 !== null) {
            result4.push(result11);
            if (input.substr(pos, 1) === " ") {
              var result11 = " ";
              pos += 1;
            } else {
              var result11 = null;
              if (reportMatchFailures) {
                matchFailed("\" \"");
              }
            }
          }
          if (result4 !== null) {
            var result5 = parse_LINE_END_CHAR();
            if (result5 !== null) {
              var result6 = [];
              var savedPos2 = pos;
              var result8 = [];
              if (input.substr(pos, 1) === " ") {
                var result10 = " ";
                pos += 1;
              } else {
                var result10 = null;
                if (reportMatchFailures) {
                  matchFailed("\" \"");
                }
              }
              while (result10 !== null) {
                result8.push(result10);
                if (input.substr(pos, 1) === " ") {
                  var result10 = " ";
                  pos += 1;
                } else {
                  var result10 = null;
                  if (reportMatchFailures) {
                    matchFailed("\" \"");
                  }
                }
              }
              if (result8 !== null) {
                var result9 = parse_LINE_END_CHAR();
                if (result9 !== null) {
                  var result7 = [result8, result9];
                } else {
                  var result7 = null;
                  pos = savedPos2;
                }
              } else {
                var result7 = null;
                pos = savedPos2;
              }
              while (result7 !== null) {
                result6.push(result7);
                var savedPos2 = pos;
                var result8 = [];
                if (input.substr(pos, 1) === " ") {
                  var result10 = " ";
                  pos += 1;
                } else {
                  var result10 = null;
                  if (reportMatchFailures) {
                    matchFailed("\" \"");
                  }
                }
                while (result10 !== null) {
                  result8.push(result10);
                  if (input.substr(pos, 1) === " ") {
                    var result10 = " ";
                    pos += 1;
                  } else {
                    var result10 = null;
                    if (reportMatchFailures) {
                      matchFailed("\" \"");
                    }
                  }
                }
                if (result8 !== null) {
                  var result9 = parse_LINE_END_CHAR();
                  if (result9 !== null) {
                    var result7 = [result8, result9];
                  } else {
                    var result7 = null;
                    pos = savedPos2;
                  }
                } else {
                  var result7 = null;
                  pos = savedPos2;
                }
              }
              if (result6 !== null) {
                var result2 = [result4, result5, result6];
              } else {
                var result2 = null;
                pos = savedPos1;
              }
            } else {
              var result2 = null;
              pos = savedPos1;
            }
          } else {
            var result2 = null;
            pos = savedPos1;
          }
          var result3 = result2 !== null
            ? (function() { return {my_type: "line_end"}
                       })()
            : null;
          if (result3 !== null) {
            var result1 = result3;
          } else {
            var result1 = null;
            pos = savedPos0;
          }
          if (result1 !== null) {
            var result0 = result1;
          } else {
            var result0 = null;;
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_HEADER_SECTION() {
        var cacheKey = 'HEADER_SECTION@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result11 = parse_ATTRIBUTE_LINE();
        if (result11 !== null) {
          var result3 = [];
          while (result11 !== null) {
            result3.push(result11);
            var result11 = parse_ATTRIBUTE_LINE();
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          var result10 = parse_EMPTY_LINE();
          if (result10 !== null) {
            var result9 = [];
            while (result10 !== null) {
              result9.push(result10);
              var result10 = parse_EMPTY_LINE();
            }
          } else {
            var result9 = null;
          }
          if (result9 !== null) {
            var result4 = result9;
          } else {
            var result8 = parse_EOF();
            if (result8 !== null) {
              var result4 = result8;
            } else {
              if (input.substr(pos, 2) === "/n") {
                var result7 = "/n";
                pos += 2;
              } else {
                var result7 = null;
                if (reportMatchFailures) {
                  matchFailed("\"/n\"");
                }
              }
              if (result7 !== null) {
                var result4 = result7;
              } else {
                var savedPos2 = pos;
                var savedReportMatchFailuresVar0 = reportMatchFailures;
                reportMatchFailures = false;
                var result6 = parse_LINE();
                reportMatchFailures = savedReportMatchFailuresVar0;
                if (result6 !== null) {
                  var result5 = '';
                  pos = savedPos2;
                } else {
                  var result5 = null;
                }
                if (result5 !== null) {
                  var result4 = result5;
                } else {
                  var result4 = null;;
                };
              };
            };
          }
          if (result4 !== null) {
            var result1 = [result3, result4];
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(attributes) { return { my_type:"attributes",
                          items: attributes,
                          source: "TODO"
                          }})(result1[0])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("Headers followed by blank lines or a line");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_COMPOSITION() {
        var cacheKey = 'COMPOSITION@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = [];
        var result13 = parse_LINE_END_CHAR();
        while (result13 !== null) {
          result3.push(result13);
          var result13 = parse_LINE_END_CHAR();
        }
        if (result3 !== null) {
          var result4 = [];
          var result12 = parse_EMPTY_LINE();
          while (result12 !== null) {
            result4.push(result12);
            var result12 = parse_EMPTY_LINE();
          }
          if (result4 !== null) {
            var result11 = parse_HEADER_SECTION();
            var result5 = result11 !== null ? result11 : '';
            if (result5 !== null) {
              var result6 = [];
              var result10 = parse_LINE();
              while (result10 !== null) {
                result6.push(result10);
                var result10 = parse_LINE();
              }
              if (result6 !== null) {
                var result9 = parse_EOF();
                if (result9 !== null) {
                  var result7 = result9;
                } else {
                  var result8 = parse_EMPTY_LINE();
                  if (result8 !== null) {
                    var result7 = result8;
                  } else {
                    var result7 = null;;
                  };
                }
                if (result7 !== null) {
                  var result1 = [result3, result4, result5, result6, result7];
                } else {
                  var result1 = null;
                  pos = savedPos1;
                }
              } else {
                var result1 = null;
                pos = savedPos1;
              }
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(attributes, lines) { 
                    return parse_composition(attributes,lines)
                })(result1[2], result1[3])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("a musical piece  lines:LINE+ ");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ATTRIBUTE_LINE() {
        var cacheKey = 'ATTRIBUTE_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos).match(/^[a-zA-Z_\-0-9]/) !== null) {
          var result15 = input.charAt(pos);
          pos++;
        } else {
          var result15 = null;
          if (reportMatchFailures) {
            matchFailed("[a-zA-Z_\\-0-9]");
          }
        }
        if (result15 !== null) {
          var result3 = [];
          while (result15 !== null) {
            result3.push(result15);
            if (input.substr(pos).match(/^[a-zA-Z_\-0-9]/) !== null) {
              var result15 = input.charAt(pos);
              pos++;
            } else {
              var result15 = null;
              if (reportMatchFailures) {
                matchFailed("[a-zA-Z_\\-0-9]");
              }
            }
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          if (input.substr(pos, 0) === "") {
            var result14 = "";
            pos += 0;
          } else {
            var result14 = null;
            if (reportMatchFailures) {
              matchFailed("\"\"");
            }
          }
          var result4 = result14 !== null ? result14 : '';
          if (result4 !== null) {
            if (input.substr(pos, 1) === ":") {
              var result5 = ":";
              pos += 1;
            } else {
              var result5 = null;
              if (reportMatchFailures) {
                matchFailed("\":\"");
              }
            }
            if (result5 !== null) {
              var result6 = parse__();
              if (result6 !== null) {
                if (input.substr(pos).match(/^[^\n\r]/) !== null) {
                  var result13 = input.charAt(pos);
                  pos++;
                } else {
                  var result13 = null;
                  if (reportMatchFailures) {
                    matchFailed("[^\\n\\r]");
                  }
                }
                if (result13 !== null) {
                  var result7 = [];
                  while (result13 !== null) {
                    result7.push(result13);
                    if (input.substr(pos).match(/^[^\n\r]/) !== null) {
                      var result13 = input.charAt(pos);
                      pos++;
                    } else {
                      var result13 = null;
                      if (reportMatchFailures) {
                        matchFailed("[^\\n\\r]");
                      }
                    }
                  }
                } else {
                  var result7 = null;
                }
                if (result7 !== null) {
                  var result8 = parse__();
                  if (result8 !== null) {
                    var result12 = parse_LINE_END_CHAR();
                    if (result12 !== null) {
                      var result9 = result12;
                    } else {
                      var savedPos2 = pos;
                      var savedReportMatchFailuresVar0 = reportMatchFailures;
                      reportMatchFailures = false;
                      var result11 = parse_EOF();
                      reportMatchFailures = savedReportMatchFailuresVar0;
                      if (result11 !== null) {
                        var result10 = '';
                        pos = savedPos2;
                      } else {
                        var result10 = null;
                      }
                      if (result10 !== null) {
                        var result9 = result10;
                      } else {
                        var result9 = null;;
                      };
                    }
                    if (result9 !== null) {
                      var result1 = [result3, result4, result5, result6, result7, result8, result9];
                    } else {
                      var result1 = null;
                      pos = savedPos1;
                    }
                  } else {
                    var result1 = null;
                    pos = savedPos1;
                  }
                } else {
                  var result1 = null;
                  pos = savedPos1;
                }
              } else {
                var result1 = null;
                pos = savedPos1;
              }
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(key_chars, blanks, value_chars) { return { my_type:"attribute",
                          key: key_chars.join(''),
                          value:this.trim(value_chars.join('')),
                          source: "todo"
                          }})(result1[0], result1[3], result1[4])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie Author: John Rothfield");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LINE_END() {
        var cacheKey = 'LINE_END@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedReportMatchFailuresVar0 = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_EOF();
        reportMatchFailures = savedReportMatchFailuresVar0;
        if (result3 !== null) {
          var result2 = '';
          pos = savedPos0;
        } else {
          var result2 = null;
        }
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result1 = parse_EOL();
          if (result1 !== null) {
            var result0 = result1;
          } else {
            var result0 = null;;
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("eol or eof");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_COMPOUND_LINE() {
        var cacheKey = 'COMPOUND_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = [];
        var result16 = parse_UPPER_OCTAVE_LINE();
        while (result16 !== null) {
          result3.push(result16);
          var result16 = parse_UPPER_OCTAVE_LINE();
        }
        if (result3 !== null) {
          var result15 = parse_DEVANAGRI_LINE();
          if (result15 !== null) {
            var result4 = result15;
          } else {
            var result14 = parse_SARGAM_LINE();
            if (result14 !== null) {
              var result4 = result14;
            } else {
              var result13 = parse_ABC_LINE();
              if (result13 !== null) {
                var result4 = result13;
              } else {
                var result12 = parse_NUMBER_LINE();
                if (result12 !== null) {
                  var result4 = result12;
                } else {
                  var result4 = null;;
                };
              };
            };
          }
          if (result4 !== null) {
            var result5 = [];
            var result11 = parse_LOWER_OCTAVE_LINE();
            while (result11 !== null) {
              result5.push(result11);
              var result11 = parse_LOWER_OCTAVE_LINE();
            }
            if (result5 !== null) {
              var result10 = parse_LYRICS_LINE();
              var result6 = result10 !== null ? result10 : '';
              if (result6 !== null) {
                var result7 = parse_LINE_END();
                if (result7 !== null) {
                  var result8 = [];
                  var result9 = parse_EMPTY_LINE();
                  while (result9 !== null) {
                    result8.push(result9);
                    var result9 = parse_EMPTY_LINE();
                  }
                  if (result8 !== null) {
                    var result1 = [result3, result4, result5, result6, result7, result8];
                  } else {
                    var result1 = null;
                    pos = savedPos1;
                  }
                } else {
                  var result1 = null;
                  pos = savedPos1;
                }
              } else {
                var result1 = null;
                pos = savedPos1;
              }
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(uppers, sargam, lowers, lyrics) {
                    return parse_line(uppers,sargam,lowers,lyrics)
                  })(result1[0], result1[1], result1[2], result1[3])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LINE() {
        var cacheKey = 'LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_COMPOUND_LINE();
        if (result3 !== null) {
          var result0 = result3;
        } else {
          var result2 = parse_SIMPLE_LINE();
          if (result2 !== null) {
            var result0 = result2;
          } else {
            var result1 = parse_LYRICS_SECTION();
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("main line of music. multiple lines including syllables etc,delimited by empty line. There is an order, optional upper octave lines followed by main line of sargam followed by optional lyrics line");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LYRICS_SECTION() {
        var cacheKey = 'LYRICS_SECTION@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_LYRICS_LINE();
        if (result7 !== null) {
          var result3 = [];
          while (result7 !== null) {
            result3.push(result7);
            var result7 = parse_LYRICS_LINE();
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          var result4 = parse_LINE_END();
          if (result4 !== null) {
            var result5 = [];
            var result6 = parse_EMPTY_LINE();
            while (result6 !== null) {
              result5.push(result6);
              var result6 = parse_EMPTY_LINE();
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(lyrics_lines) { 
                   return parse_lyrics_section(lyrics_lines)
              })(result1[0])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("AKA verse,chorus,paragraph. Lines of lyrics");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SIMPLE_LINE() {
        var cacheKey = 'SIMPLE_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result14 = parse_DEVANAGRI_LINE();
        if (result14 !== null) {
          var result3 = result14;
        } else {
          var result13 = parse_SARGAM_LINE();
          if (result13 !== null) {
            var result3 = result13;
          } else {
            var result12 = parse_ABC_LINE();
            if (result12 !== null) {
              var result3 = result12;
            } else {
              var result11 = parse_NUMBER_LINE();
              if (result11 !== null) {
                var result3 = result11;
              } else {
                var result3 = null;;
              };
            };
          };
        }
        if (result3 !== null) {
          var result4 = [];
          var result10 = parse_LOWER_OCTAVE_LINE();
          while (result10 !== null) {
            result4.push(result10);
            var result10 = parse_LOWER_OCTAVE_LINE();
          }
          if (result4 !== null) {
            var result9 = parse_LYRICS_LINE();
            var result5 = result9 !== null ? result9 : '';
            if (result5 !== null) {
              var result6 = parse_LINE_END();
              if (result6 !== null) {
                var result7 = [];
                var result8 = parse_EMPTY_LINE();
                while (result8 !== null) {
                  result7.push(result8);
                  var result8 = parse_EMPTY_LINE();
                }
                if (result7 !== null) {
                  var result1 = [result3, result4, result5, result6, result7];
                } else {
                  var result1 = null;
                  pos = savedPos1;
                }
              } else {
                var result1 = null;
                pos = savedPos1;
              }
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(sargam, lowers, lyrics) { 
                    uppers=''
                    return parse_line(uppers,sargam,lowers,lyrics)
              })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_ORNAMENT() {
        var cacheKey = 'SARGAM_ORNAMENT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_SARGAM_PITCH();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_SARGAM_PITCH();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(items) { 
                      return parse_ornament("",items,"")
                   })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("in upper line NRSNS");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DELIMITED_SARGAM_ORNAMENT() {
        var cacheKey = 'DELIMITED_SARGAM_ORNAMENT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos, 1) === "<") {
          var result3 = "<";
          pos += 1;
        } else {
          var result3 = null;
          if (reportMatchFailures) {
            matchFailed("\"<\"");
          }
        }
        if (result3 !== null) {
          var result6 = parse_SARGAM_PITCH();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_SARGAM_PITCH();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            if (input.substr(pos, 1) === ">") {
              var result5 = ">";
              pos += 1;
            } else {
              var result5 = null;
              if (reportMatchFailures) {
                matchFailed("\">\"");
              }
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(left_delimiter, items, right_delimiter) { 
                      return parse_ornament(left_delimiter,items,right_delimiter)
                   })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("in upper line <NRSNS>");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_ORNAMENT() {
        var cacheKey = 'NUMBER_ORNAMENT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_NUMBER_PITCH();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_NUMBER_PITCH();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(items) { 
                      return parse_ornament("",items,"")
                   })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("in upper line NRSNS");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DELIMITED_NUMBER_ORNAMENT() {
        var cacheKey = 'DELIMITED_NUMBER_ORNAMENT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos, 1) === "<") {
          var result3 = "<";
          pos += 1;
        } else {
          var result3 = null;
          if (reportMatchFailures) {
            matchFailed("\"<\"");
          }
        }
        if (result3 !== null) {
          var result6 = parse_NUMBER_PITCH();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_NUMBER_PITCH();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            if (input.substr(pos, 1) === ">") {
              var result5 = ">";
              pos += 1;
            } else {
              var result5 = null;
              if (reportMatchFailures) {
                matchFailed("\">\"");
              }
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(left_delimiter, items, right_delimiter) { 
                      return parse_ornament(left_delimiter,items,right_delimiter)
                   })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("in upper line <NRSNS>");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_UPPER_OCTAVE_LINE() {
        var cacheKey = 'UPPER_OCTAVE_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result9 = parse_WHITE_SPACE();
        var result3 = result9 !== null ? result9 : '';
        if (result3 !== null) {
          var result8 = parse_UPPER_OCTAVE_LINE_ITEM();
          if (result8 !== null) {
            var result4 = [];
            while (result8 !== null) {
              result4.push(result8);
              var result8 = parse_UPPER_OCTAVE_LINE_ITEM();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result7 = parse_WHITE_SPACE();
            var result5 = result7 !== null ? result7 : '';
            if (result5 !== null) {
              var result6 = parse_LINE_END();
              if (result6 !== null) {
                var result1 = [result3, result4, result5, result6];
              } else {
                var result1 = null;
                pos = savedPos1;
              }
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(begin_white_space, items, end_white_space) {
                   my_items =  _.compact(_.flatten([begin_white_space, items,end_white_space]))
                 return {
                         my_type:"upper_octave_line",
                         source: this.get_source_for_items(my_items),
                         items: my_items
                        } 
                })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("can put upper octave dots or semicolons for upper upper octave (. or :). Also tala symbols +203");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_FORWARD_SLASH_CHAR() {
        var cacheKey = 'FORWARD_SLASH_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        if (input.substr(pos, 1) === "/") {
          var result0 = "/";
          pos += 1;
        } else {
          var result0 = null;
          if (reportMatchFailures) {
            matchFailed("\"/\"");
          }
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("note that putting forward slash in regex doesn't seem to work");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_CHORD_SYMBOL_CHAR() {
        var cacheKey = 'CHORD_SYMBOL_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        if (input.substr(pos).match(/^[a-gA-GmiMaIivV0-9+]/) !== null) {
          var result2 = input.charAt(pos);
          pos++;
        } else {
          var result2 = null;
          if (reportMatchFailures) {
            matchFailed("[a-gA-GmiMaIivV0-9+]");
          }
        }
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result1 = parse_FORWARD_SLASH_CHAR();
          if (result1 !== null) {
            var result0 = result1;
          } else {
            var result0 = null;;
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_CHORD_SYMBOL_INITIAL_CHAR() {
        var cacheKey = 'CHORD_SYMBOL_INITIAL_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        if (input.substr(pos).match(/^[a-gA-GvViI]/) !== null) {
          var result0 = input.charAt(pos);
          pos++;
        } else {
          var result0 = null;
          if (reportMatchFailures) {
            matchFailed("[a-gA-GvViI]");
          }
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_CHORD_SYMBOL() {
        var cacheKey = 'CHORD_SYMBOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var savedPos2 = pos;
        var savedReportMatchFailuresVar0 = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos3 = pos;
        if (input.substr(pos).match(/^[SrRgGmMPdDnN]/) !== null) {
          var result8 = input.charAt(pos);
          pos++;
        } else {
          var result8 = null;
          if (reportMatchFailures) {
            matchFailed("[SrRgGmMPdDnN]");
          }
        }
        if (result8 !== null) {
          if (input.substr(pos).match(/^[SrRgGmMPdDnN]/) !== null) {
            var result9 = input.charAt(pos);
            pos++;
          } else {
            var result9 = null;
            if (reportMatchFailures) {
              matchFailed("[SrRgGmMPdDnN]");
            }
          }
          if (result9 !== null) {
            if (input.substr(pos).match(/^[SrRgGmMPdDnN]/) !== null) {
              var result10 = input.charAt(pos);
              pos++;
            } else {
              var result10 = null;
              if (reportMatchFailures) {
                matchFailed("[SrRgGmMPdDnN]");
              }
            }
            if (result10 !== null) {
              var result7 = [result8, result9, result10];
            } else {
              var result7 = null;
              pos = savedPos3;
            }
          } else {
            var result7 = null;
            pos = savedPos3;
          }
        } else {
          var result7 = null;
          pos = savedPos3;
        }
        reportMatchFailures = savedReportMatchFailuresVar0;
        if (result7 === null) {
          var result3 = '';
        } else {
          var result3 = null;
          pos = savedPos2;
        }
        if (result3 !== null) {
          var result4 = parse_CHORD_SYMBOL_INITIAL_CHAR();
          if (result4 !== null) {
            var result5 = [];
            var result6 = parse_CHORD_SYMBOL_CHAR();
            while (result6 !== null) {
              result5.push(result6);
              var result6 = parse_CHORD_SYMBOL_CHAR();
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(initial, chars) {
                        source=initial + chars.join('')
                        return {
                         my_type:"chord_symbol",
                         source: source, 
                        } 
            })(result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("I IV V. Put in lookahead for 3 sargam chars. ");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ALTERNATE_ENDING_INDICATOR() {
        var cacheKey = 'ALTERNATE_ENDING_INDICATOR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos).match(/^[1-3]/) !== null) {
          var result3 = input.charAt(pos);
          pos++;
        } else {
          var result3 = null;
          if (reportMatchFailures) {
            matchFailed("[1-3]");
          }
        }
        if (result3 !== null) {
          if (input.substr(pos).match(/^[._]/) !== null) {
            var result5 = input.charAt(pos);
            pos++;
          } else {
            var result5 = null;
            if (reportMatchFailures) {
              matchFailed("[._]");
            }
          }
          if (result5 !== null) {
            var result4 = [];
            while (result5 !== null) {
              result4.push(result5);
              if (input.substr(pos).match(/^[._]/) !== null) {
                var result5 = input.charAt(pos);
                pos++;
              } else {
                var result5 = null;
                if (reportMatchFailures) {
                  matchFailed("[._]");
                }
              }
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result1 = [result3, result4];
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(num, underscores) {
                      if (typeof(dot) == 'undefined') {
                        dot=''
                      }
                      if (typeof(underscores) == 'undefined') {
                        underscores=[]
                      }
                      source=_.flatten([num,dot,underscores]).join('')
                      return {
                        my_type: "ending",
                        source:source,
                        num:parseInt(num)
                }
              })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("1._______ 2.___ etc. The period is optional. Must have either dot or underscores. TODO: accepts 1_.___ which is not exactly what I want.");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_UPPER_OCTAVE_LINE_ITEM() {
        var cacheKey = 'UPPER_OCTAVE_LINE_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result11 = parse_DELIMITED_SARGAM_ORNAMENT();
        if (result11 !== null) {
          var result0 = result11;
        } else {
          var result10 = parse_DELIMITED_NUMBER_ORNAMENT();
          if (result10 !== null) {
            var result0 = result10;
          } else {
            var result9 = parse_WHITE_SPACE();
            if (result9 !== null) {
              var result0 = result9;
            } else {
              var result8 = parse_UPPER_OCTAVE_DOT();
              if (result8 !== null) {
                var result0 = result8;
              } else {
                var result7 = parse_ALTERNATE_ENDING_INDICATOR();
                if (result7 !== null) {
                  var result0 = result7;
                } else {
                  var result6 = parse_TALA();
                  if (result6 !== null) {
                    var result0 = result6;
                  } else {
                    var result5 = parse_MORDENT();
                    if (result5 !== null) {
                      var result0 = result5;
                    } else {
                      var result4 = parse_UPPER_UPPER_OCTAVE_SYMBOL();
                      if (result4 !== null) {
                        var result0 = result4;
                      } else {
                        var result3 = parse_CHORD_SYMBOL();
                        if (result3 !== null) {
                          var result0 = result3;
                        } else {
                          var result2 = parse_SARGAM_ORNAMENT();
                          if (result2 !== null) {
                            var result0 = result2;
                          } else {
                            var result1 = parse_NUMBER_ORNAMENT();
                            if (result1 !== null) {
                              var result0 = result1;
                            } else {
                              var result0 = null;;
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("Things above notes, including talas, octaves,chords, and 1st and second ending symbols");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LOWER_OCTAVE_LINE() {
        var cacheKey = 'LOWER_OCTAVE_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result5 = parse_LOWER_OCTAVE_LINE_ITEM();
        if (result5 !== null) {
          var result3 = [];
          while (result5 !== null) {
            result3.push(result5);
            var result5 = parse_LOWER_OCTAVE_LINE_ITEM();
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          var result4 = parse_LINE_END();
          if (result4 !== null) {
            var result1 = [result3, result4];
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(items) {
                 my_items =  _.flatten(items)
                 if (my_items.length == 0) {
                   return ""
                 }
                 return {
                         my_type:"lower_octave_line",
                         source: this.get_source_for_items(items),
                         items: my_items
                        } 
                })(result1[0])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("can put lower octave dots or semicolons for lower-lower octave (. or :)");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_KOMMAL_INDICATOR() {
        var cacheKey = 'KOMMAL_INDICATOR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "_") {
          var result1 = "_";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"_\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "kommal_indicator",
                                  source:char,
                                  }
                          })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("For the traditional bhatkande notation. for devanagri, indicates a flatted note, since devanagri seems not to have lowercase");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LOWER_OCTAVE_LINE_ITEM() {
        var cacheKey = 'LOWER_OCTAVE_LINE_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result4 = parse_WHITE_SPACE();
        if (result4 !== null) {
          var result0 = result4;
        } else {
          var result3 = parse_LOWER_OCTAVE_DOT();
          if (result3 !== null) {
            var result0 = result3;
          } else {
            var result2 = parse_LOWER_LOWER_OCTAVE_SYMBOL();
            if (result2 !== null) {
              var result0 = result2;
            } else {
              var result1 = parse_KOMMAL_INDICATOR();
              if (result1 !== null) {
                var result0 = result1;
              } else {
                var result0 = null;;
              };
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed(".: for now");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LOWER_OCTAVE_DOT() {
        var cacheKey = 'LOWER_OCTAVE_DOT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos).match(/^[.*]/) !== null) {
          var result1 = input.charAt(pos);
          pos++;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("[.*]");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "lower_octave_indicator",
                                  source:char,
                                  octave:-1
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_UPPER_UPPER_OCTAVE_SYMBOL() {
        var cacheKey = 'UPPER_UPPER_OCTAVE_SYMBOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === ":") {
          var result1 = ":";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\":\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "upper_upper_octave_indicator",
                                  source:char,
                                  octave:2
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LOWER_LOWER_OCTAVE_SYMBOL() {
        var cacheKey = 'LOWER_LOWER_OCTAVE_SYMBOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === ":") {
          var result1 = ":";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\":\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "lower_lower_octave_indicator",
                                  source:char,
                                  octave:-2
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_MORDENT() {
        var cacheKey = 'MORDENT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "~") {
          var result1 = "~";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"~\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "mordent",
                          source:char
                        }
               })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_TALA() {
        var cacheKey = 'TALA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos).match(/^[+1203456]/) !== null) {
          var result1 = input.charAt(pos);
          pos++;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("[+1203456]");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "tala",
                          source:char
               }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("tala markings. ie +203 for tintal. 012 for rupak");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_END_SLUR() {
        var cacheKey = 'END_SLUR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === ")") {
          var result1 = ")";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\")\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "end_slur",
                                  source:char
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("symbol for end of a slur - a right paren");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BEGIN_SLUR_OF_PITCH() {
        var cacheKey = 'BEGIN_SLUR_OF_PITCH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "(") {
          var result1 = "(";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"(\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "begin_slur",
                                  source:char
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("symbol for beginning a slur - we use left-paren (");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_END_SLUR_OF_PITCH() {
        var cacheKey = 'END_SLUR_OF_PITCH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === ")") {
          var result1 = ")";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\")\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return { my_type: "end_slur",
                                  source:char
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("symbol for end of a slur - a right paren");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_UPPER_OCTAVE_DOT() {
        var cacheKey = 'UPPER_OCTAVE_DOT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos).match(/^[.*]/) !== null) {
          var result1 = input.charAt(pos);
          pos++;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("[.*]");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { 
                    return { my_type: "upper_octave_indicator",
                                  source:char,
                                  octave:1
                                  }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_MEASURE() {
        var cacheKey = 'ABC_MEASURE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result10 = parse_BARLINE();
        var result3 = result10 !== null ? result10 : '';
        if (result3 !== null) {
          var result9 = parse_ABC_NON_BARLINE();
          if (result9 !== null) {
            var result4 = [];
            while (result9 !== null) {
              result4.push(result9);
              var result9 = parse_ABC_NON_BARLINE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result8 = parse_BARLINE();
            if (result8 !== null) {
              var result5 = result8;
            } else {
              var savedPos2 = pos;
              var savedReportMatchFailuresVar0 = reportMatchFailures;
              reportMatchFailures = false;
              var result7 = parse_LINE_END();
              reportMatchFailures = savedReportMatchFailuresVar0;
              if (result7 !== null) {
                var result6 = '';
                pos = savedPos2;
              } else {
                var result6 = null;
              }
              if (result6 !== null) {
                var result5 = result6;
              } else {
                var result5 = null;;
              };
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(start_obs, items, end_obs) {
          
                    return parse_measure(start_obs,items,end_obs)
                       })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("measures,note that beginning and end of line implicitly demarcates a measure");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_MEASURE() {
        var cacheKey = 'NUMBER_MEASURE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result10 = parse_BARLINE();
        var result3 = result10 !== null ? result10 : '';
        if (result3 !== null) {
          var result9 = parse_NUMBER_NON_BARLINE();
          if (result9 !== null) {
            var result4 = [];
            while (result9 !== null) {
              result4.push(result9);
              var result9 = parse_NUMBER_NON_BARLINE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result8 = parse_BARLINE();
            if (result8 !== null) {
              var result5 = result8;
            } else {
              var savedPos2 = pos;
              var savedReportMatchFailuresVar0 = reportMatchFailures;
              reportMatchFailures = false;
              var result7 = parse_LINE_END();
              reportMatchFailures = savedReportMatchFailuresVar0;
              if (result7 !== null) {
                var result6 = '';
                pos = savedPos2;
              } else {
                var result6 = null;
              }
              if (result6 !== null) {
                var result5 = result6;
              } else {
                var result5 = null;;
              };
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(start_obs, items, end_obs) {
                    return parse_measure(start_obs,items,end_obs)
                       })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("measures,note that beginning and end of line implicitly demarcates a measure");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_MEASURE() {
        var cacheKey = 'DEVANAGRI_MEASURE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result10 = parse_BARLINE();
        var result3 = result10 !== null ? result10 : '';
        if (result3 !== null) {
          var result9 = parse_DEVANAGRI_NON_BARLINE();
          if (result9 !== null) {
            var result4 = [];
            while (result9 !== null) {
              result4.push(result9);
              var result9 = parse_DEVANAGRI_NON_BARLINE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result8 = parse_BARLINE();
            if (result8 !== null) {
              var result5 = result8;
            } else {
              var savedPos2 = pos;
              var savedReportMatchFailuresVar0 = reportMatchFailures;
              reportMatchFailures = false;
              var result7 = parse_LINE_END();
              reportMatchFailures = savedReportMatchFailuresVar0;
              if (result7 !== null) {
                var result6 = '';
                pos = savedPos2;
              } else {
                var result6 = null;
              }
              if (result6 !== null) {
                var result5 = result6;
              } else {
                var result5 = null;;
              };
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(start_obs, items, end_obs) {
                    return parse_measure(start_obs,items,end_obs)
                       })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("measures,note that beginning and end of line implicitly demarcates a measure");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_MEASURE() {
        var cacheKey = 'MEASURE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result10 = parse_BARLINE();
        var result3 = result10 !== null ? result10 : '';
        if (result3 !== null) {
          var result9 = parse_NON_BARLINE();
          if (result9 !== null) {
            var result4 = [];
            while (result9 !== null) {
              result4.push(result9);
              var result9 = parse_NON_BARLINE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result8 = parse_BARLINE();
            if (result8 !== null) {
              var result5 = result8;
            } else {
              var savedPos2 = pos;
              var savedReportMatchFailuresVar0 = reportMatchFailures;
              reportMatchFailures = false;
              var result7 = parse_LINE_END();
              reportMatchFailures = savedReportMatchFailuresVar0;
              if (result7 !== null) {
                var result6 = '';
                pos = savedPos2;
              } else {
                var result6 = null;
              }
              if (result6 !== null) {
                var result5 = result6;
              } else {
                var result5 = null;;
              };
            }
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(start_obs, items, end_obs) {
                    return parse_measure(start_obs,items,end_obs)
                  })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("measures,note that beginning and end of line implicitly demarcates a measure");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_NON_BARLINE() {
        var cacheKey = 'ABC_NON_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var result8 = parse_WHITE_SPACE();
        if (result8 !== null) {
          var result0 = result8;
        } else {
          var result7 = parse_ABC_BEAT_DELIMITED();
          if (result7 !== null) {
            var result0 = result7;
          } else {
            var result6 = parse_ABC_BEAT_UNDELIMITED();
            if (result6 !== null) {
              var result0 = result6;
            } else {
              var result5 = parse_ABC_PITCH();
              if (result5 !== null) {
                var result0 = result5;
              } else {
                var result4 = parse_RHYTHMICAL_DASH();
                if (result4 !== null) {
                  var result0 = result4;
                } else {
                  var savedPos0 = pos;
                  var result2 = parse_REPEAT_SYMBOL();
                  var result3 = result2 !== null
                    ? (function(x) {
                                x.attributes=[];
                                return x;
                        })(result2)
                    : null;
                  if (result3 !== null) {
                    var result1 = result3;
                  } else {
                    var result1 = null;
                    pos = savedPos0;
                  }
                  if (result1 !== null) {
                    var result0 = result1;
                  } else {
                    var result0 = null;;
                  };
                };
              };
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_NON_BARLINE() {
        var cacheKey = 'NUMBER_NON_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var result8 = parse_WHITE_SPACE();
        if (result8 !== null) {
          var result0 = result8;
        } else {
          var result7 = parse_NUMBER_BEAT_DELIMITED();
          if (result7 !== null) {
            var result0 = result7;
          } else {
            var result6 = parse_NUMBER_BEAT_UNDELIMITED();
            if (result6 !== null) {
              var result0 = result6;
            } else {
              var result5 = parse_NUMBER_PITCH();
              if (result5 !== null) {
                var result0 = result5;
              } else {
                var result4 = parse_RHYTHMICAL_DASH();
                if (result4 !== null) {
                  var result0 = result4;
                } else {
                  var savedPos0 = pos;
                  var result2 = parse_REPEAT_SYMBOL();
                  var result3 = result2 !== null
                    ? (function(x) {
                                x.attributes=[];
                                return x;
                        })(result2)
                    : null;
                  if (result3 !== null) {
                    var result1 = result3;
                  } else {
                    var result1 = null;
                    pos = savedPos0;
                  }
                  if (result1 !== null) {
                    var result0 = result1;
                  } else {
                    var result0 = null;;
                  };
                };
              };
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_NON_BARLINE() {
        var cacheKey = 'DEVANAGRI_NON_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var result8 = parse_WHITE_SPACE();
        if (result8 !== null) {
          var result0 = result8;
        } else {
          var result7 = parse_DEVANAGRI_BEAT_DELIMITED();
          if (result7 !== null) {
            var result0 = result7;
          } else {
            var result6 = parse_DEVANAGRI_BEAT_UNDELIMITED();
            if (result6 !== null) {
              var result0 = result6;
            } else {
              var result5 = parse_DEVANAGRI_PITCH();
              if (result5 !== null) {
                var result0 = result5;
              } else {
                var result4 = parse_RHYTHMICAL_DASH();
                if (result4 !== null) {
                  var result0 = result4;
                } else {
                  var savedPos0 = pos;
                  var result2 = parse_REPEAT_SYMBOL();
                  var result3 = result2 !== null
                    ? (function(x) {
                                x.attributes=[];
                                return x;
                        })(result2)
                    : null;
                  if (result3 !== null) {
                    var result1 = result3;
                  } else {
                    var result1 = null;
                    pos = savedPos0;
                  }
                  if (result1 !== null) {
                    var result0 = result1;
                  } else {
                    var result0 = null;;
                  };
                };
              };
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NON_BARLINE() {
        var cacheKey = 'NON_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var result8 = parse_WHITE_SPACE();
        if (result8 !== null) {
          var result0 = result8;
        } else {
          var result7 = parse_BEAT_DELIMITED();
          if (result7 !== null) {
            var result0 = result7;
          } else {
            var result6 = parse_BEAT_UNDELIMITED();
            if (result6 !== null) {
              var result0 = result6;
            } else {
              var result5 = parse_SARGAM_PITCH();
              if (result5 !== null) {
                var result0 = result5;
              } else {
                var result4 = parse_RHYTHMICAL_DASH();
                if (result4 !== null) {
                  var result0 = result4;
                } else {
                  var savedPos0 = pos;
                  var result2 = parse_REPEAT_SYMBOL();
                  var result3 = result2 !== null
                    ? (function(x) {
                                x.attributes=[];
                                return x;
                        })(result2)
                    : null;
                  if (result3 !== null) {
                    var result1 = result3;
                  } else {
                    var result1 = null;
                    pos = savedPos0;
                  }
                  if (result1 !== null) {
                    var result0 = result1;
                  } else {
                    var result0 = null;;
                  };
                };
              };
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_LINE_ITEM() {
        var cacheKey = 'SARGAM_LINE_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result10 = parse_MEASURE();
        if (result10 !== null) {
          var result0 = result10;
        } else {
          var result9 = parse_WHITE_SPACE();
          if (result9 !== null) {
            var result0 = result9;
          } else {
            var result8 = parse_BEAT_DELIMITED();
            if (result8 !== null) {
              var result0 = result8;
            } else {
              var result7 = parse_BEAT_UNDELIMITED();
              if (result7 !== null) {
                var result0 = result7;
              } else {
                var result6 = parse_SARGAM_PITCH();
                if (result6 !== null) {
                  var result0 = result6;
                } else {
                  var result5 = parse_RHYTHMICAL_DASH();
                  if (result5 !== null) {
                    var result0 = result5;
                  } else {
                    var result4 = parse_BARLINE();
                    if (result4 !== null) {
                      var result0 = result4;
                    } else {
                      var savedPos0 = pos;
                      var result2 = parse_REPEAT_SYMBOL();
                      var result3 = result2 !== null
                        ? (function(x) {
                                    x.attributes=[];
                                    return x;
                            })(result2)
                        : null;
                      if (result3 !== null) {
                        var result1 = result3;
                      } else {
                        var result1 = null;
                        pos = savedPos0;
                      }
                      if (result1 !== null) {
                        var result0 = result1;
                      } else {
                        var result0 = null;;
                      };
                    };
                  };
                };
              };
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("an item in the main line");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LINE_NUMBER() {
        var cacheKey = 'LINE_NUMBER@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos).match(/^[*0-9]/) !== null) {
          var result5 = input.charAt(pos);
          pos++;
        } else {
          var result5 = null;
          if (reportMatchFailures) {
            matchFailed("[*0-9]");
          }
        }
        if (result5 !== null) {
          var result3 = [];
          while (result5 !== null) {
            result3.push(result5);
            if (input.substr(pos).match(/^[*0-9]/) !== null) {
              var result5 = input.charAt(pos);
              pos++;
            } else {
              var result5 = null;
              if (reportMatchFailures) {
                matchFailed("[*0-9]");
              }
            }
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          if (input.substr(pos, 1) === ")") {
            var result4 = ")";
            pos += 1;
          } else {
            var result4 = null;
            if (reportMatchFailures) {
              matchFailed("\")\"");
            }
          }
          if (result4 !== null) {
            var result1 = [result3, result4];
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(digits, ch) {
                     source= digits.join('') + ")" 
                    return { my_type: "line_number",
                             source:source,
                           }
                       })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie 1) 2) 3) etc");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_LINE() {
        var cacheKey = 'ABC_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_LINE_NUMBER();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result6 = parse_ABC_MEASURE();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_ABC_MEASURE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_LINE_END();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(line_number, items) {
                 return parse_sargam_line(line_number,items,"ABC")
              })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("consists of optional line# at beginning of line, followed by 1 or more measures followed by line end");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_LINE() {
        var cacheKey = 'DEVANAGRI_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_LINE_NUMBER();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result6 = parse_DEVANAGRI_MEASURE();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_DEVANAGRI_MEASURE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_LINE_END();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(line_number, items) {
                 return parse_sargam_line(line_number,items,"devanagri")
              })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("consists of optional line# at beginning of line, followed by 1 or more measures followed by line end");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_LINE() {
        var cacheKey = 'NUMBER_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_LINE_NUMBER();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result6 = parse_NUMBER_MEASURE();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_NUMBER_MEASURE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_LINE_END();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(line_number, items) {
                 return parse_sargam_line(line_number,items,"number")
              })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("consists of optional line# at beginning of line, followed by 1 or more measures followed by line end");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_LINE() {
        var cacheKey = 'SARGAM_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_LINE_NUMBER();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result6 = parse_MEASURE();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_MEASURE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_LINE_END();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(line_number, items) {
                 return parse_sargam_line(line_number,items,"latin_sargam")
                })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("consists of optional line# at beginning of line, followed by 1 or more measures followed by line end");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_BEAT_UNDELIMITED() {
        var cacheKey = 'NUMBER_BEAT_UNDELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_NUMBER_BEAT_UNDELIMITED_ITEM();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_NUMBER_BEAT_UNDELIMITED_ITEM();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(beat_items) { 
                      return parse_beat_undelimited(beat_items)
                   })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("beats can be indicated by a group of pitches that consist only of pitches and dashes such as S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_BEAT_UNDELIMITED() {
        var cacheKey = 'ABC_BEAT_UNDELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_ABC_BEAT_UNDELIMITED_ITEM();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_ABC_BEAT_UNDELIMITED_ITEM();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(beat_items) { 
                      return parse_beat_undelimited(beat_items)
                   })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("beats can be indicated by a group of pitches that consist only of pitches and dashes such as S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BEAT_UNDELIMITED() {
        var cacheKey = 'BEAT_UNDELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_BEAT_UNDELIMITED_ITEM();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_BEAT_UNDELIMITED_ITEM();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(beat_items) { 
                      return parse_beat_undelimited(beat_items)
                   })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("beats can be indicated by a group of pitches that consist only of pitches and dashes such as S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_BEAT_UNDELIMITED() {
        var cacheKey = 'DEVANAGRI_BEAT_UNDELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_DEVANAGRI_BEAT_UNDELIMITED_ITEM();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_DEVANAGRI_BEAT_UNDELIMITED_ITEM();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(beat_items) { 
                return parse_beat_undelimited(beat_items)
              })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("beats can be indicated by a group of pitches that consist only of pitches and dashes such as S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_BEAT_UNDELIMITED_ITEM() {
        var cacheKey = 'NUMBER_BEAT_UNDELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result2 = parse_NUMBER_PITCH();
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result1 = parse_RHYTHMICAL_DASH();
          if (result1 !== null) {
            var result0 = result1;
          } else {
            var result0 = null;;
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("1--2--3-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_BEAT_UNDELIMITED_ITEM() {
        var cacheKey = 'ABC_BEAT_UNDELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result2 = parse_ABC_PITCH();
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result1 = parse_RHYTHMICAL_DASH();
          if (result1 !== null) {
            var result0 = result1;
          } else {
            var result0 = null;;
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("C--D--E-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_BEAT_UNDELIMITED_ITEM() {
        var cacheKey = 'DEVANAGRI_BEAT_UNDELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result2 = parse_DEVANAGRI_PITCH();
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result1 = parse_RHYTHMICAL_DASH();
          if (result1 !== null) {
            var result0 = result1;
          } else {
            var result0 = null;;
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("inside of a simple beat, ie S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_UNDELIMITED_SARGAM_PITCH_WITH_DASHES() {
        var cacheKey = 'UNDELIMITED_SARGAM_PITCH_WITH_DASHES@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = parse_SARGAM_PITCH();
        if (result3 !== null) {
          var result5 = parse_RHYTHMICAL_DASH();
          if (result5 !== null) {
            var result4 = [];
            while (result5 !== null) {
              result4.push(result5);
              var result5 = parse_RHYTHMICAL_DASH();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result1 = [result3, result4];
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(pitch, dashes) {
                   pitch.numerator=dashes.length+1
                   return([pitch].concat(dashes))
                })(result1[0], result1[1])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("for example S--");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BEAT_UNDELIMITED_ITEM() {
        var cacheKey = 'BEAT_UNDELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_UNDELIMITED_SARGAM_PITCH_WITH_DASHES();
        if (result3 !== null) {
          var result0 = result3;
        } else {
          var result2 = parse_SARGAM_PITCH();
          if (result2 !== null) {
            var result0 = result2;
          } else {
            var result1 = parse_RHYTHMICAL_DASH();
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("inside of a simple beat, ie S--R--G- Note that undelimited beats cannot contain spaces");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_BEAT_DELIMITED() {
        var cacheKey = 'ABC_BEAT_DELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = parse_BEGIN_BEAT_SYMBOL();
        if (result3 !== null) {
          var result6 = parse_ABC_BEAT_DELIMITED_ITEM();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_ABC_BEAT_DELIMITED_ITEM();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_END_BEAT_SYMBOL();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(begin_symbol, beat_items, end_symbol) { 
                    return parse_beat_delimited(begin_symbol,beat_items,end_symbol)
                   })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie <C D E F> .");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_BEAT_DELIMITED() {
        var cacheKey = 'NUMBER_BEAT_DELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = parse_BEGIN_BEAT_SYMBOL();
        if (result3 !== null) {
          var result6 = parse_NUMBER_BEAT_DELIMITED_ITEM();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_NUMBER_BEAT_DELIMITED_ITEM();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_END_BEAT_SYMBOL();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(begin_symbol, beat_items, end_symbol) { 
                    return parse_beat_delimited(begin_symbol,beat_items,end_symbol)
                   })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie <1 2 3> . Useful if lyrics wouldn't line up otherwise!. use <Srgm> or <S r g m> to group pithes into a single beat. The <> delimiters correspond to the lower loop in the aacm notation system");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_BEAT_DELIMITED() {
        var cacheKey = 'DEVANAGRI_BEAT_DELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = parse_BEGIN_BEAT_SYMBOL();
        if (result3 !== null) {
          var result6 = parse_DEVANAGRI_BEAT_DELIMITED_ITEM();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_DEVANAGRI_BEAT_DELIMITED_ITEM();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_END_BEAT_SYMBOL();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(begin_symbol, beat_items, end_symbol) { 
                    return parse_beat_delimited(begin_symbol,beat_items,end_symbol)
                   })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie <S R G m> . Useful if lyrics wouldn't line up otherwise!. use <Srgm> or <S r g m> to group pithes into a single beat. The <> delimiters correspond to the lower loop in the aacm notation system");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BEAT_DELIMITED() {
        var cacheKey = 'BEAT_DELIMITED@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result3 = parse_BEGIN_BEAT_SYMBOL();
        if (result3 !== null) {
          var result6 = parse_BEAT_DELIMITED_ITEM();
          if (result6 !== null) {
            var result4 = [];
            while (result6 !== null) {
              result4.push(result6);
              var result6 = parse_BEAT_DELIMITED_ITEM();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result5 = parse_END_BEAT_SYMBOL();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(begin_symbol, beat_items, end_symbol) { 
                    return parse_beat_delimited(begin_symbol,beat_items,end_symbol)
                   })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie <S R G m> . Useful if lyrics wouldn't line up otherwise!. use <Srgm> or <S r g m> to group pithes into a single beat. The <> delimiters correspond to the lower loop in the aacm notation system");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BEGIN_BEAT_SYMBOL() {
        var cacheKey = 'BEGIN_BEAT_SYMBOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "<") {
          var result1 = "<";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"<\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return {
                                   my_type: "begin_beat",
                                   source: char
                                }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("symbol to use to indicate start of beat");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_END_BEAT_SYMBOL() {
        var cacheKey = 'END_BEAT_SYMBOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === ">") {
          var result1 = ">";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\">\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return {
                                   my_type: "end_beat",
                                   source: char
                                }
                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("Symbol to use to indicate end of beat");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_BEAT_DELIMITED_ITEM() {
        var cacheKey = 'ABC_BEAT_DELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_ABC_PITCH();
        if (result3 !== null) {
          var result0 = result3;
        } else {
          var result2 = parse_RHYTHMICAL_DASH();
          if (result2 !== null) {
            var result0 = result2;
          } else {
            var result1 = parse_WHITE_SPACE();
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("inside of a delimited beat, ie C--D--E-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_BEAT_DELIMITED_ITEM() {
        var cacheKey = 'NUMBER_BEAT_DELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_NUMBER_PITCH();
        if (result3 !== null) {
          var result0 = result3;
        } else {
          var result2 = parse_RHYTHMICAL_DASH();
          if (result2 !== null) {
            var result0 = result2;
          } else {
            var result1 = parse_WHITE_SPACE();
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("inside of a delimited beat, ie 1--3--2-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_BEAT_DELIMITED_ITEM() {
        var cacheKey = 'DEVANAGRI_BEAT_DELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_DEVANAGRI_PITCH();
        if (result3 !== null) {
          var result0 = result3;
        } else {
          var result2 = parse_RHYTHMICAL_DASH();
          if (result2 !== null) {
            var result0 = result2;
          } else {
            var result1 = parse_WHITE_SPACE();
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("inside of a delimited beat, ie S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BEAT_DELIMITED_ITEM() {
        var cacheKey = 'BEAT_DELIMITED_ITEM@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result3 = parse_SARGAM_PITCH();
        if (result3 !== null) {
          var result0 = result3;
        } else {
          var result2 = parse_RHYTHMICAL_DASH();
          if (result2 !== null) {
            var result0 = result2;
          } else {
            var result1 = parse_WHITE_SPACE();
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("inside of a delimited beat, ie S--R--G-");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_WORD() {
        var cacheKey = 'WORD@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos).match(/^[a-zA-Z]/) !== null) {
          var result5 = input.charAt(pos);
          pos++;
        } else {
          var result5 = null;
          if (reportMatchFailures) {
            matchFailed("[a-zA-Z]");
          }
        }
        if (result5 !== null) {
          var result3 = [];
          while (result5 !== null) {
            result3.push(result5);
            if (input.substr(pos).match(/^[a-zA-Z]/) !== null) {
              var result5 = input.charAt(pos);
              pos++;
            } else {
              var result5 = null;
              if (reportMatchFailures) {
                matchFailed("[a-zA-Z]");
              }
            }
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          var result4 = parse_WHITE_SPACE();
          if (result4 !== null) {
            var result1 = [result3, result4];
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(letters) { return { my_type: "word",
                                                            word: letters.join("")
                                                           }
                                               })(result1[0])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("a non-syllable like john");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse__() {
        var cacheKey = '_@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result1 = [];
        var result3 = parse_SPACE();
        while (result3 !== null) {
          result1.push(result3);
          var result3 = parse_SPACE();
        }
        var result2 = result1 !== null
          ? (function(blanks) { if (blanks.length==0) {
                                  return '' 
                               }
                               return { my_type:"whitespace",
                                       source: blanks.join('')
                                       }
                                       })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("whitespace");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SYLLABLE() {
        var cacheKey = 'SYLLABLE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        if (input.substr(pos).match(/^[a-zA-Z'!?\-,]/) !== null) {
          var result7 = input.charAt(pos);
          pos++;
        } else {
          var result7 = null;
          if (reportMatchFailures) {
            matchFailed("[a-zA-Z'!?\\-,]");
          }
        }
        if (result7 !== null) {
          var result3 = [];
          while (result7 !== null) {
            result3.push(result7);
            if (input.substr(pos).match(/^[a-zA-Z'!?\-,]/) !== null) {
              var result7 = input.charAt(pos);
              pos++;
            } else {
              var result7 = null;
              if (reportMatchFailures) {
                matchFailed("[a-zA-Z'!?\\-,]");
              }
            }
          }
        } else {
          var result3 = null;
        }
        if (result3 !== null) {
          if (input.substr(pos, 1) === "-") {
            var result6 = "-";
            pos += 1;
          } else {
            var result6 = null;
            if (reportMatchFailures) {
              matchFailed("\"-\"");
            }
          }
          var result4 = result6 !== null ? result6 : '';
          if (result4 !== null) {
            var result5 = parse__();
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(letters, optional_dash, whitespace) { var syl = letters.join('') + optional_dash
                 return _.compact([{ my_type:  "syllable",
                          syllable: syl,
                          source: syl 
                        }, whitespace])
                        })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("for example he- or world");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LYRICS_LINE() {
        var cacheKey = 'LYRICS_LINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result9 = parse_WHITE_SPACE();
        var result3 = result9 !== null ? result9 : '';
        if (result3 !== null) {
          var result8 = parse_SYLLABLE();
          if (result8 !== null) {
            var result4 = [];
            while (result8 !== null) {
              result4.push(result8);
              var result8 = parse_SYLLABLE();
            }
          } else {
            var result4 = null;
          }
          if (result4 !== null) {
            var result7 = parse_WHITE_SPACE();
            var result5 = result7 !== null ? result7 : '';
            if (result5 !== null) {
              var result6 = parse_LINE_END();
              if (result6 !== null) {
                var result1 = [result3, result4, result5, result6];
              } else {
                var result1 = null;
                pos = savedPos1;
              }
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(begin_white_space, items, end_white_space) {  
                   my_items =  _.compact(_.flatten([begin_white_space, items,end_white_space]))
                   return {
                     my_type:"lyrics_line",
                     items:my_items,
                     source: this.get_source_for_items(my_items),
                        }
                })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("line of syllables");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_RHYTHMICAL_DASH() {
        var cacheKey = 'RHYTHMICAL_DASH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "-") {
          var result1 = "-";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"-\"");
          }
        }
        var result2 = result1 !== null
          ? (function(source) { 
                           return { my_type: "dash",
                             source: "-"
                                }
                          })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie a -, used as a rhythmical placeholder. IE S--R--G- ");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_SA() {
        var cacheKey = 'DEVANAGRI_SA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u0938") {
          var result1 = "\u0938";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u0938\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"C")
               })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("sa in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_RE() {
        var cacheKey = 'DEVANAGRI_RE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u0930") {
          var result1 = "\u0930";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u0930\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"D") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("re in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_GA() {
        var cacheKey = 'DEVANAGRI_GA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u095A") {
          var result1 = "\u095A";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u095A\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"E") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ga in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_MA_SHARP() {
        var cacheKey = 'DEVANAGRI_MA_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "\u092E'") {
          var result1 = "\u092E'";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u092E'\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"F#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("tivra ma in devanagri. NOTE THE TICK!!!!");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_MA() {
        var cacheKey = 'DEVANAGRI_MA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u092E") {
          var result1 = "\u092E";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u092E\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"F") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ma in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_PA() {
        var cacheKey = 'DEVANAGRI_PA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u092A") {
          var result1 = "\u092A";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u092A\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"G") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("pa in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_DHA() {
        var cacheKey = 'DEVANAGRI_DHA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u0927") {
          var result1 = "\u0927";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u0927\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"A") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("dha in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_NI() {
        var cacheKey = 'DEVANAGRI_NI@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "\u0929") {
          var result1 = "\u0929";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\u0929\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"B") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ni in devanagri");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_MUSICAL_CHAR() {
        var cacheKey = 'ABC_MUSICAL_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var result19 = parse_ABC_CSHARP();
        if (result19 !== null) {
          var result0 = result19;
        } else {
          var result18 = parse_ABC_CFLAT();
          if (result18 !== null) {
            var result0 = result18;
          } else {
            var result17 = parse_ABC_DFLAT();
            if (result17 !== null) {
              var result0 = result17;
            } else {
              var result16 = parse_ABC_DSHARP();
              if (result16 !== null) {
                var result0 = result16;
              } else {
                var result15 = parse_ABC_EFLAT();
                if (result15 !== null) {
                  var result0 = result15;
                } else {
                  var result14 = parse_ABC_FSHARP();
                  if (result14 !== null) {
                    var result0 = result14;
                  } else {
                    var result13 = parse_ABC_GFLAT();
                    if (result13 !== null) {
                      var result0 = result13;
                    } else {
                      var result12 = parse_ABC_GSHARP();
                      if (result12 !== null) {
                        var result0 = result12;
                      } else {
                        var result11 = parse_ABC_AFLAT();
                        if (result11 !== null) {
                          var result0 = result11;
                        } else {
                          var result10 = parse_ABC_ASHARP();
                          if (result10 !== null) {
                            var result0 = result10;
                          } else {
                            var result9 = parse_ABC_BFLAT();
                            if (result9 !== null) {
                              var result0 = result9;
                            } else {
                              var result8 = parse_ABC_BSHARP();
                              if (result8 !== null) {
                                var result0 = result8;
                              } else {
                                var result7 = parse_ABC_C();
                                if (result7 !== null) {
                                  var result0 = result7;
                                } else {
                                  var result6 = parse_ABC_D();
                                  if (result6 !== null) {
                                    var result0 = result6;
                                  } else {
                                    var result5 = parse_ABC_E();
                                    if (result5 !== null) {
                                      var result0 = result5;
                                    } else {
                                      var result4 = parse_ABC_F();
                                      if (result4 !== null) {
                                        var result0 = result4;
                                      } else {
                                        var result3 = parse_ABC_G();
                                        if (result3 !== null) {
                                          var result0 = result3;
                                        } else {
                                          var result2 = parse_ABC_A();
                                          if (result2 !== null) {
                                            var result0 = result2;
                                          } else {
                                            var result1 = parse_ABC_B();
                                            if (result1 !== null) {
                                              var result0 = result1;
                                            } else {
                                              var result0 = null;;
                                            };
                                          };
                                        };
                                      };
                                    };
                                  };
                                };
                              };
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_C() {
        var cacheKey = 'ABC_C@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "C") {
          var result1 = "C";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"C\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"C") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_D() {
        var cacheKey = 'ABC_D@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "D") {
          var result1 = "D";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"D\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"D") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_E() {
        var cacheKey = 'ABC_E@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "E") {
          var result1 = "E";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"E\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"E") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_F() {
        var cacheKey = 'ABC_F@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "F") {
          var result1 = "F";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"F\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"F") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_G() {
        var cacheKey = 'ABC_G@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "G") {
          var result1 = "G";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"G\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"G") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_A() {
        var cacheKey = 'ABC_A@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "A") {
          var result1 = "A";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"A\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"A") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_B() {
        var cacheKey = 'ABC_B@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "B") {
          var result1 = "B";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"B\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"B") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_CSHARP() {
        var cacheKey = 'ABC_CSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "C#") {
          var result1 = "C#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"C#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"C#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_CFLAT() {
        var cacheKey = 'ABC_CFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Cb") {
          var result1 = "Cb";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Cb\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Cb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_DFLAT() {
        var cacheKey = 'ABC_DFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Db") {
          var result1 = "Db";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Db\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Db") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_DSHARP() {
        var cacheKey = 'ABC_DSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "D#") {
          var result1 = "D#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"D#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"D#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_EFLAT() {
        var cacheKey = 'ABC_EFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Eb") {
          var result1 = "Eb";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Eb\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Eb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_FSHARP() {
        var cacheKey = 'ABC_FSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "F#") {
          var result1 = "F#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"F#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"F#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_GFLAT() {
        var cacheKey = 'ABC_GFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Gb") {
          var result1 = "Gb";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Gb\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Gb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_GSHARP() {
        var cacheKey = 'ABC_GSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "G#") {
          var result1 = "G#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"G#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"G#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_AFLAT() {
        var cacheKey = 'ABC_AFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Ab") {
          var result1 = "Ab";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Ab\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Ab") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_ASHARP() {
        var cacheKey = 'ABC_ASHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "A#") {
          var result1 = "A#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"A#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"A#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_BFLAT() {
        var cacheKey = 'ABC_BFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Bb") {
          var result1 = "Bb";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Bb\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Bb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_BSHARP() {
        var cacheKey = 'ABC_BSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "B#") {
          var result1 = "B#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"B#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"B#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_MUSICAL_CHAR() {
        var cacheKey = 'NUMBER_MUSICAL_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var result21 = parse_NUMBER_CSHARP();
        if (result21 !== null) {
          var result0 = result21;
        } else {
          var result20 = parse_NUMBER_CFLAT();
          if (result20 !== null) {
            var result0 = result20;
          } else {
            var result19 = parse_NUMBER_DFLAT();
            if (result19 !== null) {
              var result0 = result19;
            } else {
              var result18 = parse_NUMBER_DSHARP();
              if (result18 !== null) {
                var result0 = result18;
              } else {
                var result17 = parse_NUMBER_EFLAT();
                if (result17 !== null) {
                  var result0 = result17;
                } else {
                  var result16 = parse_NUMBER_ESHARP();
                  if (result16 !== null) {
                    var result0 = result16;
                  } else {
                    var result15 = parse_NUMBER_FFLAT();
                    if (result15 !== null) {
                      var result0 = result15;
                    } else {
                      var result14 = parse_NUMBER_FSHARP();
                      if (result14 !== null) {
                        var result0 = result14;
                      } else {
                        var result13 = parse_NUMBER_GFLAT();
                        if (result13 !== null) {
                          var result0 = result13;
                        } else {
                          var result12 = parse_NUMBER_GSHARP();
                          if (result12 !== null) {
                            var result0 = result12;
                          } else {
                            var result11 = parse_NUMBER_AFLAT();
                            if (result11 !== null) {
                              var result0 = result11;
                            } else {
                              var result10 = parse_NUMBER_ASHARP();
                              if (result10 !== null) {
                                var result0 = result10;
                              } else {
                                var result9 = parse_NUMBER_BFLAT();
                                if (result9 !== null) {
                                  var result0 = result9;
                                } else {
                                  var result8 = parse_NUMBER_BSHARP();
                                  if (result8 !== null) {
                                    var result0 = result8;
                                  } else {
                                    var result7 = parse_NUMBER_C();
                                    if (result7 !== null) {
                                      var result0 = result7;
                                    } else {
                                      var result6 = parse_NUMBER_D();
                                      if (result6 !== null) {
                                        var result0 = result6;
                                      } else {
                                        var result5 = parse_NUMBER_E();
                                        if (result5 !== null) {
                                          var result0 = result5;
                                        } else {
                                          var result4 = parse_NUMBER_F();
                                          if (result4 !== null) {
                                            var result0 = result4;
                                          } else {
                                            var result3 = parse_NUMBER_G();
                                            if (result3 !== null) {
                                              var result0 = result3;
                                            } else {
                                              var result2 = parse_NUMBER_A();
                                              if (result2 !== null) {
                                                var result0 = result2;
                                              } else {
                                                var result1 = parse_NUMBER_B();
                                                if (result1 !== null) {
                                                  var result0 = result1;
                                                } else {
                                                  var result0 = null;;
                                                };
                                              };
                                            };
                                          };
                                        };
                                      };
                                    };
                                  };
                                };
                              };
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_C() {
        var cacheKey = 'NUMBER_C@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "1") {
          var result1 = "1";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"1\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"C") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_D() {
        var cacheKey = 'NUMBER_D@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "2") {
          var result1 = "2";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"2\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"D") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_E() {
        var cacheKey = 'NUMBER_E@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "3") {
          var result1 = "3";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"3\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"E") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_F() {
        var cacheKey = 'NUMBER_F@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "4") {
          var result1 = "4";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"4\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"F") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_G() {
        var cacheKey = 'NUMBER_G@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "5") {
          var result1 = "5";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"5\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"G") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_A() {
        var cacheKey = 'NUMBER_A@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "6") {
          var result1 = "6";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"6\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"A") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_B() {
        var cacheKey = 'NUMBER_B@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "7") {
          var result1 = "7";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"7\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"B") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_CSHARP() {
        var cacheKey = 'NUMBER_CSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "1#") {
          var result1 = "1#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"1#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"C#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_CFLAT() {
        var cacheKey = 'NUMBER_CFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "1b") {
          var result1 = "1b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"1b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Cb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_DFLAT() {
        var cacheKey = 'NUMBER_DFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "2b") {
          var result1 = "2b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"2b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Db") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_DSHARP() {
        var cacheKey = 'NUMBER_DSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "2#") {
          var result1 = "2#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"2#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"D#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_EFLAT() {
        var cacheKey = 'NUMBER_EFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "3b") {
          var result1 = "3b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"3b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Eb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_ESHARP() {
        var cacheKey = 'NUMBER_ESHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "3#") {
          var result1 = "3#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"3#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"E#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_FFLAT() {
        var cacheKey = 'NUMBER_FFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "4b") {
          var result1 = "4b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"4b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Fb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_FSHARP() {
        var cacheKey = 'NUMBER_FSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "4#") {
          var result1 = "4#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"4#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"F#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_GFLAT() {
        var cacheKey = 'NUMBER_GFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "5b") {
          var result1 = "5b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"5b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Gb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_GSHARP() {
        var cacheKey = 'NUMBER_GSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "5#") {
          var result1 = "5#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"5#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"G#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_AFLAT() {
        var cacheKey = 'NUMBER_AFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "6b") {
          var result1 = "6b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"6b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Ab") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_ASHARP() {
        var cacheKey = 'NUMBER_ASHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "6#") {
          var result1 = "6#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"6#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"A#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_BFLAT() {
        var cacheKey = 'NUMBER_BFLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "7b") {
          var result1 = "7b";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"7b\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"Bb") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_BSHARP() {
        var cacheKey = 'NUMBER_BSHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "7#") {
          var result1 = "7#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"7#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) { return sa_helper(char,"B#") })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_MUSICAL_CHAR() {
        var cacheKey = 'DEVANAGRI_MUSICAL_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result8 = parse_DEVANAGRI_SA();
        if (result8 !== null) {
          var result0 = result8;
        } else {
          var result7 = parse_DEVANAGRI_RE();
          if (result7 !== null) {
            var result0 = result7;
          } else {
            var result6 = parse_DEVANAGRI_GA();
            if (result6 !== null) {
              var result0 = result6;
            } else {
              var result5 = parse_DEVANAGRI_MA_SHARP();
              if (result5 !== null) {
                var result0 = result5;
              } else {
                var result4 = parse_DEVANAGRI_MA();
                if (result4 !== null) {
                  var result0 = result4;
                } else {
                  var result3 = parse_DEVANAGRI_PA();
                  if (result3 !== null) {
                    var result0 = result3;
                  } else {
                    var result2 = parse_DEVANAGRI_DHA();
                    if (result2 !== null) {
                      var result0 = result2;
                    } else {
                      var result1 = parse_DEVANAGRI_NI();
                      if (result1 !== null) {
                        var result0 = result1;
                      } else {
                        var result0 = null;;
                      };
                    };
                  };
                };
              };
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("devanagri characters.");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_MUSICAL_CHAR() {
        var cacheKey = 'SARGAM_MUSICAL_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result22 = parse_SARGAM_SA_FLAT();
        if (result22 !== null) {
          var result0 = result22;
        } else {
          var result21 = parse_SARGAM_SA_SHARP();
          if (result21 !== null) {
            var result0 = result21;
          } else {
            var result20 = parse_SARGAM_RE_SHARP();
            if (result20 !== null) {
              var result0 = result20;
            } else {
              var result19 = parse_SARGAM_GA_SHARP();
              if (result19 !== null) {
                var result0 = result19;
              } else {
                var result18 = parse_SARGAM_PA_SHARP();
                if (result18 !== null) {
                  var result0 = result18;
                } else {
                  var result17 = parse_SARGAM_PA_FLAT();
                  if (result17 !== null) {
                    var result0 = result17;
                  } else {
                    var result16 = parse_SARGAM_DHA_SHARP();
                    if (result16 !== null) {
                      var result0 = result16;
                    } else {
                      var savedPos0 = pos;
                      var result14 = parse_SARGAM_NI_SHARP();
                      if (result14 !== null) {
                        var result15 = parse_SARGAM_PA_FLAT();
                        if (result15 !== null) {
                          var result13 = [result14, result15];
                        } else {
                          var result13 = null;
                          pos = savedPos0;
                        }
                      } else {
                        var result13 = null;
                        pos = savedPos0;
                      }
                      if (result13 !== null) {
                        var result0 = result13;
                      } else {
                        var result12 = parse_SARGAM_SA();
                        if (result12 !== null) {
                          var result0 = result12;
                        } else {
                          var result11 = parse_SARGAM_RE_FLAT();
                          if (result11 !== null) {
                            var result0 = result11;
                          } else {
                            var result10 = parse_SARGAM_RE();
                            if (result10 !== null) {
                              var result0 = result10;
                            } else {
                              var result9 = parse_SARGAM_GA_FLAT();
                              if (result9 !== null) {
                                var result0 = result9;
                              } else {
                                var result8 = parse_SARGAM_GA();
                                if (result8 !== null) {
                                  var result0 = result8;
                                } else {
                                  var result7 = parse_SARGAM_MA();
                                  if (result7 !== null) {
                                    var result0 = result7;
                                  } else {
                                    var result6 = parse_SARGAM_MA_SHARP();
                                    if (result6 !== null) {
                                      var result0 = result6;
                                    } else {
                                      var result5 = parse_SARGAM_PA();
                                      if (result5 !== null) {
                                        var result0 = result5;
                                      } else {
                                        var result4 = parse_SARGAM_DHA_FLAT();
                                        if (result4 !== null) {
                                          var result0 = result4;
                                        } else {
                                          var result3 = parse_SARGAM_DHA();
                                          if (result3 !== null) {
                                            var result0 = result3;
                                          } else {
                                            var result2 = parse_SARGAM_NI_FLAT();
                                            if (result2 !== null) {
                                              var result0 = result2;
                                            } else {
                                              var result1 = parse_SARGAM_NI();
                                              if (result1 !== null) {
                                                var result0 = result1;
                                              } else {
                                                var result0 = null;;
                                              };
                                            };
                                          };
                                        };
                                      };
                                    };
                                  };
                                };
                              };
                            };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("Letters SrRgGmMPdDnN in latin script");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_CHAR() {
        var cacheKey = 'ABC_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos).match(/^[CDEFGAB]/) !== null) {
          var result1 = input.charAt(pos);
          pos++;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("[CDEFGAB]");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {
                   return char;
           })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie SrRgG, and possibly the devanagri characters as well");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_SA() {
        var cacheKey = 'SARGAM_SA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "S") {
          var result1 = "S";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"S\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"C")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_SA_FLAT() {
        var cacheKey = 'SARGAM_SA_FLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Sb") {
          var result1 = "Sb";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Sb\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"Cb")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_SA_SHARP() {
        var cacheKey = 'SARGAM_SA_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "S#") {
          var result1 = "S#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"S#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"C#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_RE_FLAT() {
        var cacheKey = 'SARGAM_RE_FLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "r") {
          var result1 = "r";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"r\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"Db")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_RE() {
        var cacheKey = 'SARGAM_RE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "R") {
          var result1 = "R";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"R\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"D")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_RE_SHARP() {
        var cacheKey = 'SARGAM_RE_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "R#") {
          var result1 = "R#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"R#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"D#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_GA_SHARP() {
        var cacheKey = 'SARGAM_GA_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "G#") {
          var result1 = "G#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"G#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"E#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_GA_FLAT() {
        var cacheKey = 'SARGAM_GA_FLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "g") {
          var result1 = "g";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"g\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"Eb")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_GA() {
        var cacheKey = 'SARGAM_GA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "G") {
          var result1 = "G";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"G\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"E")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_MA() {
        var cacheKey = 'SARGAM_MA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "m") {
          var result1 = "m";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"m\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"F")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_MA_SHARP() {
        var cacheKey = 'SARGAM_MA_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "M") {
          var result1 = "M";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"M\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"F#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_PA() {
        var cacheKey = 'SARGAM_PA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "P") {
          var result1 = "P";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"P\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"G")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_PA_FLAT() {
        var cacheKey = 'SARGAM_PA_FLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "Pb") {
          var result1 = "Pb";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"Pb\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"Gb")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_PA_SHARP() {
        var cacheKey = 'SARGAM_PA_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "P#") {
          var result1 = "P#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"P#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"G#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_DHA_FLAT() {
        var cacheKey = 'SARGAM_DHA_FLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "d") {
          var result1 = "d";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"d\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"Ab")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_DHA() {
        var cacheKey = 'SARGAM_DHA@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "D") {
          var result1 = "D";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"D\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"A")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_DHA_SHARP() {
        var cacheKey = 'SARGAM_DHA_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "D#") {
          var result1 = "D#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"D#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"A#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_NI_FLAT() {
        var cacheKey = 'SARGAM_NI_FLAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "n") {
          var result1 = "n";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"n\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"Bb")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_NI() {
        var cacheKey = 'SARGAM_NI@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "N") {
          var result1 = "N";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"N\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"B")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_NI_SHARP() {
        var cacheKey = 'SARGAM_NI_SHARP@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "N#") {
          var result1 = "N#";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"N#\"");
          }
        }
        var result2 = result1 !== null
          ? (function(char) {return sa_helper(char,"B#")})(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_NUMBER_PITCH() {
        var cacheKey = 'NUMBER_PITCH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_BEGIN_SLUR_OF_PITCH();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result4 = parse_NUMBER_MUSICAL_CHAR();
          if (result4 !== null) {
            var result6 = parse_END_SLUR_OF_PITCH();
            var result5 = result6 !== null ? result6 : '';
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(slur, char, end_slur) { 
                    return parse_sargam_pitch(slur,char,end_slur)
                 })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie 123");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_ABC_PITCH() {
        var cacheKey = 'ABC_PITCH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_BEGIN_SLUR_OF_PITCH();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result4 = parse_ABC_MUSICAL_CHAR();
          if (result4 !== null) {
            var result6 = parse_END_SLUR_OF_PITCH();
            var result5 = result6 !== null ? result6 : '';
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(slur, char, end_slur) { 
                    return parse_sargam_pitch(slur,char,end_slur)
                 })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie CDE");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DEVANAGRI_PITCH() {
        var cacheKey = 'DEVANAGRI_PITCH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_BEGIN_SLUR_OF_PITCH();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result4 = parse_DEVANAGRI_MUSICAL_CHAR();
          if (result4 !== null) {
            var result6 = parse_END_SLUR_OF_PITCH();
            var result5 = result6 !== null ? result6 : '';
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(slur, char, end_slur) { 
                    return parse_sargam_pitch(slur,char,end_slur)
                 })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("a sargam pitch ie SrR..");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SARGAM_PITCH() {
        var cacheKey = 'SARGAM_PITCH@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var result7 = parse_BEGIN_SLUR_OF_PITCH();
        var result3 = result7 !== null ? result7 : '';
        if (result3 !== null) {
          var result4 = parse_SARGAM_MUSICAL_CHAR();
          if (result4 !== null) {
            var result6 = parse_END_SLUR_OF_PITCH();
            var result5 = result6 !== null ? result6 : '';
            if (result5 !== null) {
              var result1 = [result3, result4, result5];
            } else {
              var result1 = null;
              pos = savedPos1;
            }
          } else {
            var result1 = null;
            pos = savedPos1;
          }
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function(slur, char, end_slur) { 
                    return parse_sargam_pitch(slur,char,end_slur)
                 })(result1[0], result1[1], result1[2])
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("a sargam pitch ie SrR..");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_REPEAT_SYMBOL() {
        var cacheKey = 'REPEAT_SYMBOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "%") {
          var result1 = "%";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"%\"");
          }
        }
        var result2 = result1 !== null
          ? (function(str) { return { my_type:"repeat_symbol",
                               source: str,
                                }
                        })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie %");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_BARLINE() {
        var cacheKey = 'BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var result8 = parse_REVERSE_FINAL_BARLINE();
        if (result8 !== null) {
          var result0 = result8;
        } else {
          var result7 = parse_FINAL_BARLINE();
          if (result7 !== null) {
            var result0 = result7;
          } else {
            var result6 = parse_DOUBLE_BARLINE();
            if (result6 !== null) {
              var result0 = result6;
            } else {
              var result5 = parse_LEFT_REPEAT();
              if (result5 !== null) {
                var result0 = result5;
              } else {
                var result4 = parse_RIGHT_REPEAT();
                if (result4 !== null) {
                  var result0 = result4;
                } else {
                  var savedPos0 = pos;
                  var result2 = parse_SINGLE_BARLINE();
                  var result3 = result2 !== null
                    ? (function(barline) { return barline})(result2)
                    : null;
                  if (result3 !== null) {
                    var result1 = result3;
                  } else {
                    var result1 = null;
                    pos = savedPos0;
                  }
                  if (result1 !== null) {
                    var result0 = result1;
                  } else {
                    var result0 = null;;
                  };
                };
              };
            };
          };
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("a musical barline or repeat");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_REVERSE_FINAL_BARLINE() {
        var cacheKey = 'REVERSE_FINAL_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "[|") {
          var result1 = "[|";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"[|\"");
          }
        }
        var result2 = result1 !== null
          ? (function(str) { return { my_type:"reverse_final_barline",
                            source: str,
                           is_barline:true
                          }
                        })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie [|, a reverse final barline");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_FINAL_BARLINE() {
        var cacheKey = 'FINAL_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "|]") {
          var result1 = "|]";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"|]\"");
          }
        }
        var result2 = result1 !== null
          ? (function(str) { return { my_type:"final_barline",
                              source: str,
                              is_barline:true
                            }
                        })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie ||, a final barline");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_DOUBLE_BARLINE() {
        var cacheKey = 'DOUBLE_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "||") {
          var result1 = "||";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"||\"");
          }
        }
        var result2 = result1 !== null
          ? (function(str) { return { my_type:"double_barline",
                               source: str,
                              is_barline:true
                                }
                        })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie ||, a solid barline");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SINGLE_BARLINE() {
        var cacheKey = 'SINGLE_BARLINE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 1) === "|") {
          var result1 = "|";
          pos += 1;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"|\"");
          }
        }
        var result2 = result1 !== null
          ? (function(str) { return { my_type: "single_barline",
                             is_barline:true,
                            source: str
                             }
                  })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie |");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LEFT_REPEAT() {
        var cacheKey = 'LEFT_REPEAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 2) === "|:") {
          var result1 = "|:";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\"|:\"");
          }
        }
        var result2 = result1 !== null
          ? (function() { return { my_type: "left_repeat",
                             is_barline:true,
                            source: "|:"
                             }
                  })()
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie |:");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_RIGHT_REPEAT() {
        var cacheKey = 'RIGHT_REPEAT@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        if (input.substr(pos, 2) === ":|") {
          var result1 = ":|";
          pos += 2;
        } else {
          var result1 = null;
          if (reportMatchFailures) {
            matchFailed("\":|\"");
          }
        }
        var result2 = result1 !== null
          ? (function() { return { my_type: "right_repeat",
                               is_barline:true,
                               source: ":|"
                             }
                  })()
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("ie :|");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_LINE_END_CHAR() {
        var cacheKey = 'LINE_END_CHAR@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        
        if (input.substr(pos, 2) === "\r\n") {
          var result3 = "\r\n";
          pos += 2;
        } else {
          var result3 = null;
          if (reportMatchFailures) {
            matchFailed("\"\\r\\n\"");
          }
        }
        if (result3 !== null) {
          var result0 = result3;
        } else {
          if (input.substr(pos, 1) === "\r") {
            var result2 = "\r";
            pos += 1;
          } else {
            var result2 = null;
            if (reportMatchFailures) {
              matchFailed("\"\\r\"");
            }
          }
          if (result2 !== null) {
            var result0 = result2;
          } else {
            if (input.substr(pos, 1) === "\n") {
              var result1 = "\n";
              pos += 1;
            } else {
              var result1 = null;
              if (reportMatchFailures) {
                matchFailed("\"\\n\"");
              }
            }
            if (result1 !== null) {
              var result0 = result1;
            } else {
              var result0 = null;;
            };
          };
        }
        
        
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_EOL() {
        var cacheKey = 'EOL@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result1 = parse_LINE_END_CHAR();
        var result2 = result1 !== null
          ? (function() { return { my_type: "end_of_line",
                              source: "\n"
                              }})()
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("end of line");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_EOF() {
        var cacheKey = 'EOF@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var savedPos1 = pos;
        var savedReportMatchFailuresVar0 = reportMatchFailures;
        reportMatchFailures = false;
        if (input.length > pos) {
          var result3 = input.charAt(pos);
          pos++;
        } else {
          var result3 = null;
          if (reportMatchFailures) {
            matchFailed('any character');
          }
        }
        reportMatchFailures = savedReportMatchFailuresVar0;
        if (result3 === null) {
          var result1 = '';
        } else {
          var result1 = null;
          pos = savedPos1;
        }
        var result2 = result1 !== null
          ? (function() { return { my_type: "end_of_file",
                            source: "" }})()
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("end of file");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_SPACE() {
        var cacheKey = 'SPACE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        if (input.substr(pos, 1) === " ") {
          var result0 = " ";
          pos += 1;
        } else {
          var result0 = null;
          if (reportMatchFailures) {
            matchFailed("\" \"");
          }
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("space or tab char");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function parse_WHITE_SPACE() {
        var cacheKey = 'WHITE_SPACE@' + pos;
        var cachedResult = cache[cacheKey];
        if (cachedResult) {
          pos = cachedResult.nextPos;
          return cachedResult.result;
        }
        
        var savedReportMatchFailures = reportMatchFailures;
        reportMatchFailures = false;
        var savedPos0 = pos;
        var result3 = parse_SPACE();
        if (result3 !== null) {
          var result1 = [];
          while (result3 !== null) {
            result1.push(result3);
            var result3 = parse_SPACE();
          }
        } else {
          var result1 = null;
        }
        var result2 = result1 !== null
          ? (function(spaces) { return { my_type: "whitespace",
                               source: spaces.join("")
                               }
                               })(result1)
          : null;
        if (result2 !== null) {
          var result0 = result2;
        } else {
          var result0 = null;
          pos = savedPos0;
        }
        reportMatchFailures = savedReportMatchFailures;
        if (reportMatchFailures && result0 === null) {
          matchFailed("white space");
        }
        
        cache[cacheKey] = {
          nextPos: pos,
          result:  result0
        };
        return result0;
      }
      
      function buildErrorMessage() {
        function buildExpected(failuresExpected) {
          failuresExpected.sort();
          
          var lastFailure = null;
          var failuresExpectedUnique = [];
          for (var i = 0; i < failuresExpected.length; i++) {
            if (failuresExpected[i] !== lastFailure) {
              failuresExpectedUnique.push(failuresExpected[i]);
              lastFailure = failuresExpected[i];
            }
          }
          
          switch (failuresExpectedUnique.length) {
            case 0:
              return 'end of input';
            case 1:
              return failuresExpectedUnique[0];
            default:
              return failuresExpectedUnique.slice(0, failuresExpectedUnique.length - 1).join(', ')
                + ' or '
                + failuresExpectedUnique[failuresExpectedUnique.length - 1];
          }
        }
        
        var expected = buildExpected(rightmostMatchFailuresExpected);
        var actualPos = Math.max(pos, rightmostMatchFailuresPos);
        var actual = actualPos < input.length
          ? quote(input.charAt(actualPos))
          : 'end of input';
        
        return 'Expected ' + expected + ' but ' + actual + ' found.';
      }
      
      function computeErrorPosition() {
        /*
         * The first idea was to use |String.split| to break the input up to the
         * error position along newlines and derive the line and column from
         * there. However IE's |split| implementation is so broken that it was
         * enough to prevent it.
         */
        
        var line = 1;
        var column = 1;
        var seenCR = false;
        
        for (var i = 0; i <  rightmostMatchFailuresPos; i++) {
          var ch = input.charAt(i);
          if (ch === '\n') {
            if (!seenCR) { line++; }
            column = 1;
            seenCR = false;
          } else if (ch === '\r' | ch === '\u2028' || ch === '\u2029') {
            line++;
            column = 1;
            seenCR = true;
          } else {
            column++;
            seenCR = false;
          }
        }
        
        return { line: line, column: column };
      }
      
      
      
    /* Initializer. All the functions in this block are available */
      
    debug=false
      
    if (typeof module !== 'undefined' && module.exports) {
      
      // running under node.js
      
      zz = require('./shims.js');
      
      util = require('util');
      
      _ = require("underscore")._;
      
      shared=require('./shared.js')
      
      _.extend(root,shared)
      
      get_composition_attribute=shared.get_composition_attribute
      
      ParserHelper= require("./parser_helper.js").ParserHelper
      
      Fraction=require('./third_party/fraction.js').Fraction
      
    }
      
    Helper =ParserHelper
      
    // Mix in the methods from Helper.
      
    // TODO: find a more elegant way to do this.
      
    // didn't work. _.extend(this, Helper) 
      
    //
      
    id_ctr=1
      
    sa_helper=Helper.sa_helper
      
    push_warning=Helper.push_warning
      
    parse_line=Helper.parse_line
      
    handle_ornament=Helper.handle_ornament
      
    find_ornaments=Helper.find_ornaments
      
    running_under_node=Helper.running_under_node
      
    map_ornaments=Helper.map_ornaments
      
    parse_ornament=Helper.parse_ornament
      
    parse_composition=Helper.parse_composition
      
    parse_sargam_pitch=Helper.parse_sargam_pitch
      
    parse_beat_delimited=Helper.parse_beat_delimited
      
    parse_beat_undelimited=Helper.parse_beat_undelimited
      
    parse_measure=Helper.parse_measure
      
    parse_sargam_line=Helper.parse_sargam_line
      
    extract_lyrics=Helper.extract_lyrics
      
    mark_partial_measures= Helper.mark_partial_measures
      
    measure_dashes_at_beginning_of_beats= Helper.measure_dashes_at_beginning_of_beats
      
    measure_note_durations= Helper.measure_note_durations
      
    count_beat_subdivisions = Helper.count_beat_subdivisions
      
    parens_unbalanced = Helper.parens_unbalanced
      
    get_source_for_items = Helper.get_source_for_items
      
    measure_columns = Helper.measure_columns
      
    assign_attributes=Helper.assign_attributes
      
    assign_lyrics=Helper.assign_lyrics
      
    assign_lyrics2=Helper.assign_lyrics2
      
    collect_nodes = Helper.collect_nodes
      
    map_nodes = Helper.map_nodes
      
    check_semantics=Helper.check_semantics
      
    measure_pitch_durations=Helper.measure_pitch_durations
      
    parse_lyrics_section=Helper.parse_lyrics_section
      
    assign_syllables_from_lyrics_sections=Helper.assign_syllables_from_lyrics_sections
      
    hypher=Helper.hypher
      
    if (typeof require !== 'undefined') {
      
      // x=require('./tree_iterators.js')
      
      all_items=require('./all_items.js').all_items
      
    }
      
    log = Helper.log
      
    // end of mixin section
      
    warnings=[]
      
  
      
      var result = parseFunctions[startRule]();
      
      /*
       * The parser is now in one of the following three states:
       *
       * 1. The parser successfully parsed the whole input.
       *
       *    - |result !== null|
       *    - |pos === input.length|
       *    - |rightmostMatchFailuresExpected| may or may not contain something
       *
       * 2. The parser successfully parsed only a part of the input.
       *
       *    - |result !== null|
       *    - |pos < input.length|
       *    - |rightmostMatchFailuresExpected| may or may not contain something
       *
       * 3. The parser did not successfully parse any part of the input.
       *
       *   - |result === null|
       *   - |pos === 0|
       *   - |rightmostMatchFailuresExpected| contains at least one failure
       *
       * All code following this comment (including called functions) must
       * handle these states.
       */
      if (result === null || pos !== input.length) {
        var errorPosition = computeErrorPosition();
        throw new this.SyntaxError(
          buildErrorMessage(),
          errorPosition.line,
          errorPosition.column
        );
      }
      
      return result;
    },
    
    /* Returns the parser source code. */
    toSource: function() { return this._source; }
  };
  
  /* Thrown when a parser encounters a syntax error. */
  
  result.SyntaxError = function(message, line, column) {
    this.name = 'SyntaxError';
    this.message = message;
    this.line = line;
    this.column = column;
  };
  
  result.SyntaxError.prototype = Error.prototype;
  
  return result;
})();
